var wa=Object.defineProperty;var ba=(t,e,a)=>e in t?wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var He=(t,e,a)=>(ba(t,typeof e!="symbol"?e+"":e,a),a);import{d as I,c as S,E as ct,N as rt,r as V,o as m,a as $,w as P,b as Ot,u as r,e as Ca,g as ke,f as g,h as ie,i as y,j as b,k,p as we,l as be,m as qt,n as Ht,t as L,F as O,q as Q,s as B,v as q,H as Pt,x as Pa,y as $a,z as Ia,A as Da,B as Aa,C as ja,D as Sa,G as se,I as pe,J as re,K as Ze,L as F,M as pt,O as Ce,P as zt,Q as Nt,T as Ta,R as Va,S as Ea,U as ue,V as Ba,W as $t,X as de,Y as Ma,Z as Ra,_ as Ua,$ as La,a0 as Wt,a1 as Xt,a2 as Ge,a3 as H,a4 as It,a5 as W,a6 as Fa,a7 as Oa,a8 as qa,a9 as Ha,aa as za,ab as Qt,ac as je,ad as Zt,ae as Me,af as Gt,ag as Na,ah as Wa,ai as it,aj as Xa,ak as Qa,al as Za,am as Ga,an as Ja,ao as Ya,ap as Ka,aq as Jt,ar as eo,as as to,at as ao}from"./.pnpm.55d2c8ea.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();const J=I({__name:"index",props:{icon:{},size:{default:18},color:{}},setup(t){const e=t,a=S(()=>{if(ct[e.icon])return ct[e.icon];if(rt[e.icon])return rt[e.icon]});return(n,s)=>{const o=V("el-icon");return m(),$(o,{size:n.size,color:n.color},{default:P(()=>[(m(),$(Ot(r(a))))]),_:1},8,["size","color"])}}}),Ee=(t,e,a="",n)=>{Ca({message:t,title:a,duration:2e3,type:e,...n})},Y=(t,e="温馨提示",a)=>{Ee(t,"success",e,a)},D=(t,e="温馨提示",a)=>{Ee(t,"error",e,a)},Pe=t=>(we("data-v-25334c0b"),t=t(),be(),t),oo={class:"category-container"},no={class:"item"},so=Pe(()=>b("div",{class:"title"}," 附件名称 ",-1)),lo={class:"item"},co=Pe(()=>b("div",{class:"title"}," 文件名称 ",-1)),ro={class:"item"},io=Pe(()=>b("div",{class:"title"}," 文件路径 ",-1)),uo={class:"item"},po=Pe(()=>b("div",{class:"title"}," 文件链接 ",-1)),mo={class:"item"},_o=Pe(()=>b("div",{class:"title"}," 文件格式 ",-1)),fo={class:"item"},ho=Pe(()=>b("div",{class:"title"}," 文件大小（字节） ",-1)),vo={class:"item"},go=Pe(()=>b("div",{class:"title"}," 附件选定器 ",-1)),yo=I({__name:"upload",props:{modelValue:{}},emits:["update:init"],setup(t,{expose:e,emit:a}){const n=t,s=ke(),o=g({...n.modelValue}),l=()=>o.value.title?o.value:(D("请输入附件名称"),!1);return ie(()=>{a("update:init",s.exposed)}),e({getFormData:l}),(c,i)=>{const u=V("el-input");return m(),y("div",oo,[b("div",no,[so,k(u,{modelValue:r(o).title,"onUpdate:modelValue":i[0]||(i[0]=d=>r(o).title=d),placeholder:"请输入附件名称"},null,8,["modelValue"])]),b("div",lo,[co,k(u,{modelValue:r(o).filename,"onUpdate:modelValue":i[1]||(i[1]=d=>r(o).filename=d),placeholder:"请输入文件名称",disabled:""},null,8,["modelValue"])]),b("div",ro,[io,k(u,{modelValue:r(o).path,"onUpdate:modelValue":i[2]||(i[2]=d=>r(o).path=d),placeholder:"请输入文件路径",disabled:""},null,8,["modelValue"])]),b("div",uo,[po,k(u,{modelValue:r(o).url,"onUpdate:modelValue":i[3]||(i[3]=d=>r(o).url=d),placeholder:"请输入文件链接",disabled:""},null,8,["modelValue"])]),b("div",mo,[_o,k(u,{modelValue:r(o).format,"onUpdate:modelValue":i[4]||(i[4]=d=>r(o).format=d),placeholder:"请输入文件格式",disabled:""},null,8,["modelValue"])]),b("div",fo,[ho,k(u,{modelValue:r(o).size,"onUpdate:modelValue":i[5]||(i[5]=d=>r(o).size=d),placeholder:"请输入文件大小",disabled:""},null,8,["modelValue"])]),b("div",vo,[go,k(u,{modelValue:r(o).adapter,"onUpdate:modelValue":i[6]||(i[6]=d=>r(o).adapter=d),placeholder:"请输入附件选定器",disabled:""},null,8,["modelValue"])])])}}});const R=(t,e)=>{const a=t.__vccOpts||t;for(const[n,s]of e)a[n]=s;return a},xo=R(yo,[["__scopeId","data-v-25334c0b"]]),ko={web_name:"",web_title:""},wo="modulepreload",bo=function(t){return"/view/"+t},Dt={},ye=function(e,a,n){if(!a||a.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(a.map(o=>{if(o=bo(o),o in Dt)return;Dt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":wo,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},ze="/login",Yt="/Index/index",Co=["/exception","/401","/403","/404","/401","/500","/502"],Po={401:"您没有权限访问该页面",403:"资源错误",404:"资源错误",500:"服务器内部错误",502:"请求错误，无法获取到数据"},mt="authorization",_t="appid",Re=qt(()=>{const t=Ie();return Ht(`${t}_${mt}`,null)}),$e=qt(()=>{const t=Ie();return Ht(`${t}_${_t}`,null)}),Je=I({__name:"menu-item",props:{menuData:{}},setup(t){const e=$e(),a=n=>{const s=n.path,o=g({});n.ajaxParams&&(o.value=et(n.ajaxParams));let l={...o.value};e.value&&(l={...l,appid:e.value}),le(`/${s}`,l)};return(n,s)=>{const o=V("el-menu-item-group"),l=V("el-menu-item");return m(),y(O,null,[n.menuData.isGroup&&n.menuData.show?(m(),$(o,{key:0},{title:P(()=>[b("span",null,L(n.menuData.title),1)]),default:P(()=>[(m(!0),y(O,null,Q(n.menuData.children,c=>(m(),$(Je,{key:c.activeId,"menu-data":c},null,8,["menu-data"]))),128))]),_:1})):B("",!0),!n.menuData.isGroup&&n.menuData.show?(m(),$(l,{key:1,index:n.menuData.activeId,onClick:s[0]||(s[0]=c=>a(n.menuData))},{default:P(()=>[q(L(n.menuData.title),1)]),_:1},8,["index"])):B("",!0)],64)}}}),$o=I({__name:"menu-item-level",props:{menuData:{}},setup(t){const e=$e(),a=n=>{const s=n.path,o=g({});n.ajaxParams&&(o.value=et(n.ajaxParams));let l={...o.value};e.value&&(l={...l,appid:e.value}),le(`/${s}`,l)};return(n,s)=>{const o=V("el-sub-menu"),l=V("el-menu-item");return m(),y(O,null,[n.menuData.isGroup&&n.menuData.show?(m(),$(o,{key:0,index:n.menuData.activeId},{title:P(()=>[b("span",null,L(n.menuData.title),1)]),default:P(()=>[(m(!0),y(O,null,Q(n.menuData.children,c=>(m(),$(Je,{key:c.activeId,"menu-data":c},null,8,["menu-data"]))),128))]),_:1},8,["index"])):B("",!0),!n.menuData.isGroup&&n.menuData.show?(m(),$(l,{key:1,index:n.menuData.activeId,onClick:s[0]||(s[0]=c=>a(n.menuData))},{default:P(()=>[q(L(n.menuData.title),1)]),_:1},8,["index"])):B("",!0)],64)}}}),at={layout:"mix",layoutMenu:"level",layoutTabsTheme:"radius",layoutSize:!1,theme:"OS",sideMenuCollapse:!1,sideMenuWidth:80,sideWidth:220,headerHeight:50,logoHeight:30,footerHeight:35},At={nickname:"",username:"",password:"",headimg:"",role:{},menus:[]},Io={form:{inline:!1,labelPosition:"top",labelSuffix:void 0,hideRequiredAsterisk:!0,labelWidth:"auto",showMessage:!0,inlineMessage:!0,statusIcon:!1,validateOnRuleChange:!0,disabled:!1,size:void 0,title:!0},row:{gutter:50,type:void 0,align:void 0,justify:void 0,tag:"div"},global:{"*":{},upload:{props:{modalTitle:"图片预览",onSuccess(t,e){var a;e.url=((a=t==null?void 0:t.data)==null?void 0:a.url)??""},onError(t){console.log("上传失败",t)}}}},submitBtn:!1,resetBtn:!1},Do=t=>t.map(e=>(e.handle=a=>{if((e==null?void 0:e.where)==="==")return a===e.value;if((e==null?void 0:e.where)==="!=")return a!==e.value;if((e==null?void 0:e.where)==="in"){const n=e.value;return n instanceof Array&&n instanceof Object?Xe(a,e.value):(console.error("联动组件的IN条件值必须是数组或对象"),!1)}},e)),Ao=t=>t.map(e=>(e!=null&&e.control&&(e.control=Do(e.control)),e)),jo={};function So(t,e){return m(),y("div",null," 高德地图 ")}const To=R(jo,[["render",So]]),Vo={};function Eo(t,e){return m(),y("div",null," 百度地图 ")}const Bo=R(Vo,[["render",Eo]]),Mo={};function Ro(t,e){return m(),y("div",null," 腾讯地图 ")}const Uo=R(Mo,[["render",Ro]]),Lo={javascript:Pa,php:$a,python:Ia,java:Da,css:Aa,xml:ja},Fo=t=>(Pt.registerLanguage(t,Lo[t]),Pt),Oo={class:"w-100%"},qo=["innerHTML"],Ho=I({__name:"index",props:{modelValue:{},language:{default:"javascript"},showLineNumbers:{type:Boolean}},setup(t){const e=t,a=Fo(e.language),n=g("");return Sa(()=>{n.value=a.highlight(e.modelValue,{language:e.language}).value}),(s,o)=>(m(),y("div",Oo,[b("pre",null,[q("    "),b("code",{class:"hljs",innerHTML:r(n)},null,8,qo),q(`
    `)])]))}}),Kt=t=>(we("data-v-71347fa8"),t=t(),be(),t),zo={class:"xh-icons-modal"},No={class:"xh-icons"},Wo={class:"search-container"},Xo=Kt(()=>b("div",{class:"placeholder text-blueGray"}," 温馨提示：单击图标为选择，双击图标为复制 ",-1)),Qo={class:"icon-list"},Zo={class:"tools"},Go=Kt(()=>b("div",{class:"title"}," 所有图标 ",-1)),Jo={class:"options"},Yo={class:"list"},Ko=["onDblclick","onClick"],en={class:"icon-title"},tn=I({__name:"modal",emits:["update:init"],setup(t,{expose:e,emit:a}){const n=ke(),s=g([{title:"Element-Plus",type:"element",icons:Object.keys(ct)},{title:"vicons/antd",type:"naiveui",icons:Object.keys(rt)}]),o=g(""),l=g("element"),c=g(""),i=g([]),u=p=>{i.value=[];const h=s.value.find(x=>x.type===p);h&&d(h.icons)};function d(p){let h=0;function x(){globalThis.requestIdleCallback(C=>{for(;C.timeRemaining()>0&&h<p.length;)i.value.push(p[h++]);h<p.length&&x()})}x()}const f=p=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(p).then(h=>{});else{const h=document.createElement("input");h.value=p,document.body.appendChild(h),h.select(),document.execCommand("Copy"),h.remove()}Y("复制成功")},v=p=>{c.value=p===c.value?"":p};return e({confirm:()=>c.value}),ie(()=>{d(s.value[0].icons),a("update:init",n.exposed)}),(p,h)=>{const x=J,C=V("el-button"),j=V("el-button-group"),E=V("el-input"),M=V("el-option"),w=V("el-select");return m(),y("div",zo,[b("div",No,[b("div",Wo,[k(E,{modelValue:r(o),"onUpdate:modelValue":h[1]||(h[1]=A=>se(o)?o.value=A:null),placeholder:"图标名称"},{prepend:P(()=>[k(x,{icon:"Search",type:"element"})]),append:P(()=>[k(j,null,{default:P(()=>[k(C,{onClick:h[0]||(h[0]=A=>o.value="")},{default:P(()=>[q(" 重置 ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),Xo]),b("div",Qo,[b("div",Zo,[Go,b("div",Jo,[k(w,{modelValue:r(l),"onUpdate:modelValue":h[2]||(h[2]=A=>se(l)?l.value=A:null),onChange:u},{default:P(()=>[(m(!0),y(O,null,Q(r(s),(A,T)=>(m(),$(M,{key:T,label:A.title,value:A.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),b("div",Yo,[(m(!0),y(O,null,Q(r(i).filter(A=>A.includes(r(o))),(A,T)=>(m(),y("div",{key:T,class:pe(["item",{active:A===r(c)}]),onDblclick:z=>f(A),onClick:z=>v(A)},[k(x,{icon:A,size:26,type:r(l),color:"#888"},null,8,["icon","type"]),b("div",en,L(A),1)],42,Ko))),128))])])])])}}});const an=R(tn,[["__scopeId","data-v-71347fa8"]]),me=(t,e,a)=>re({title:"通用模态框",customStyle:{width:"60%",height:"90vh"},draggable:!0,showClose:!0,closeOnClickModal:!1,...a,showConfirmButton:!1,customClass:"xh-modal-mask",message:()=>Ze(t,e)}),_e=(t,e,a)=>re({title:"可主动关闭的模态框",customStyle:{width:"60%",height:"90vh"},draggable:!0,showClose:!0,closeOnClickModal:!1,...a,showCancelButton:!0,showConfirmButton:!0,customClass:"xh-modal-close-mask",message:()=>Ze(t,e)}),jt=()=>{re.close()},on={class:"icons-container"},nn={key:0,class:"icon"},sn={key:1,class:"icon"},ln=I({__name:"index",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=()=>{const s=g();_e(an,{"onUpdate:init":o=>{s.value=o}},{title:"图标库",closeOnClickModal:!1,customStyle:{width:"60%",height:"85vh"},beforeClose:(o,l,c)=>{var i;if(o==="confirm"){const u=(i=s.value)==null?void 0:i.confirm();if(!u){D("请选择图标");return}e("update:modelValue",u),c()}else c()}})},n=()=>{e("update:modelValue",""),Y("重置成功")};return(s,o)=>{const l=J,c=V("el-button");return m(),y("div",on,[s.modelValue?(m(),y("div",nn,[k(l,{icon:s.modelValue,size:18},null,8,["icon"])])):(m(),y("div",sn)),s.modelValue?(m(),$(c,{key:2,onClick:n},{default:P(()=>[q(" 重置 ")]),_:1})):B("",!0),k(c,{type:"primary",onClick:a},{default:P(()=>[q(" 选择 ")]),_:1})])}}});const cn=R(ln,[["__scopeId","data-v-784ef829"]]),rn=["innerHTML"],un=I({__name:"index",props:{modelValue:{},style:{default:{}}},setup(t){return(e,a)=>(m(),y("div",F(e.style,{innerHTML:e.modelValue}),null,16,rn))}}),dn={};function pn(t,e){return m(),y("div",null," 自定义输入框（未实现） ")}const mn=R(dn,[["render",pn]]),_n=["innerHTML"],fn=I({__name:"index",props:{text:{},icon:{default:""},style:{default:{color:"#666",padding:"5px 0 0 0",fontSize:"12px"}},iconSize:{default:16}},setup(t){return(e,a)=>{const n=J;return m(),y("div",{class:"form-prompt",style:pt(e.style)},[e.icon?(m(),$(n,{key:0,icon:e.icon,size:e.iconSize},null,8,["icon","size"])):B("",!0),b("span",{class:"text",innerHTML:e.text},null,8,_n)],4)}}});const hn=R(fn,[["__scopeId","data-v-05bcd7b9"]]),vn=I({__name:"index",props:{modelValue:{},file:{},ajaxParams:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=o=>{e("update:modelValue",o)},s=g(a.modelValue);return(o,l)=>(m(),$(r(ce),F({modelValue:r(s),"onUpdate:modelValue":l[0]||(l[0]=c=>se(s)?s.value=c:null),file:o.file},{ajaxParams:o.ajaxParams},{"onUpdate:modelValue":n}),null,16,["modelValue","file"]))}}),gn={};function yn(t,e){return m(),y("div",null," 表格展示器 ")}const xn=R(gn,[["render",yn]]),ea=S(()=>t=>{const a=t.split("?")[0].split(".").pop();if(!a)return!1;const n=a.toLowerCase();return["png","jpg","jpeg","gif","webp","svg","bmp"].includes(n)}),kn={class:"upload-container"},wn=["onClick"],bn=I({__name:"index",props:{modelValue:{default:[]},limit:{default:1},suffix:{},dir_name:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=()=>{const o=g(),l={limit:a.limit,suffix:a.suffix,dir_name:a.dir_name};_e(ma,{...l,"onUpdate:init":c=>{o.value=c}},{title:"附件库",center:!0,customStyle:{width:"60%",height:"85vh"},beforeClose:(c,i,u)=>{var d;if(c==="confirm"){const f=(d=o.value)==null?void 0:d.getSelected();if(f.length){const v=f.map(_=>_==null?void 0:_.url);e("update:modelValue",v),u()}else D("请选择文件")}else u()}})},s=o=>{const l=a.modelValue.filter((c,i)=>i!==o);e("update:modelValue",l)};return ie(()=>{if(typeof a.modelValue=="string"){const o=a.modelValue===""?"":[a.modelValue];e("update:modelValue",o)}}),(o,l)=>{const c=V("el-image"),i=J,u=V("el-icon");return m(),y("div",kn,[(m(!0),y(O,null,Q(o.modelValue,(d,f)=>(m(),y("div",{key:f,class:"item"},[r(ea)(d)?(m(),$(c,{key:0,class:"image","preview-src-list":o.modelValue,"z-index":999,src:d,infinite:!1},null,8,["preview-src-list","src"])):(m(),$(u,{key:1,class:"file-thumb"},{default:P(()=>[k(i,{icon:"Document",size:28,type:"element"})]),_:1})),b("div",{class:"del-file",onClick:v=>s(f)},[k(i,{icon:"Delete",size:15,type:"element"})],8,wn)]))),128)),b("div",{class:"item",onClick:n},[k(i,{icon:"PlusOutlined",size:20,color:"#888"})])])}}});const Cn=R(bn,[["__scopeId","data-v-a4c0e2c6"]]),Pn={class:"editor-container"},$n=I({__name:"index",props:{modelValue:{},toolbarConfig:{},editorConfig:{},editHeight:{default:300},isUploadify:{type:Boolean,default:!0},uploadifyLimit:{},uploadifyExt:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t;Ce(u=>({"4dbdd5bb":r(i)}));const n=zt(),s=g(a.modelValue),o=g({defaultConfig:{insertKeys:{index:22,keys:["xhUploadify"]}}});Nt(()=>{n.value&&(n.value.destroy(),n.value=null)});const l=u=>{n.value=u},c=u=>{const d=u.getHtml();e("update:modelValue",d)},i=S(()=>`${a.editHeight}px`);return(u,d)=>(m(),y("div",Pn,[k(r(Ta),F({class:"toolbar",editor:r(n)},r(o)),null,16,["editor"]),k(r(Va),{modelValue:r(s),"onUpdate:modelValue":d[0]||(d[0]=f=>se(s)?s.value=f:null),"default-config":u.editorConfig,class:"editor-content",onOnCreated:l,onOnChange:c},null,8,["modelValue","default-config"])]))}});const St=R($n,[["__scopeId","data-v-274068df"]]);let ta="/api";ta=window.location.origin;const ft=ta,Z=Ea.create({baseURL:ft,timeout:6e4}),In=async t=>{const e=Re();e.value&&t.headers.set(mt,e.value);const a=$e();return a.value&&t.headers.set(_t,a.value),t},Dn=t=>{var u,d,f,v;const e=Re(),a=t.data,n=t.headers["content-type"],s=n.includes("application/json"),o=n.includes("application/octet-stream"),l=n.includes("text/html"),c=n.includes("application/javascript"),i=n.includes("application/css;");if(s){if((a==null?void 0:a.code)===301)return le(((u=a==null?void 0:a.data)==null?void 0:u.url)??""),Promise.reject(a);if((a==null?void 0:a.code)===302)return D((a==null?void 0:a.msg)||"302.网络错误~"),le(((d=a==null?void 0:a.data)==null?void 0:d.url)??""),Promise.reject(a);if((a==null?void 0:a.code)===303)return setTimeout(()=>{window.location.reload()},2e3),a;if((a==null?void 0:a.code)===304)return window.location.reload(),Promise.reject(a);if((a==null?void 0:a.code)===305)return D((a==null?void 0:a.msg)||"305.网络错误~"),setTimeout(()=>{window.location.reload()},2500),Promise.reject(a);if([600,666,11e3].includes(a==null?void 0:a.code))return Promise.reject(a);if((a==null?void 0:a.code)===200)return a;if((a==null?void 0:a.code)===12e3){e.value="";let _=(f=X.currentRoute.value)==null?void 0:f.fullPath;return(v=X.currentRoute.value.query)!=null&&v.redirect&&(_=X.currentRoute.value.query.redirect),_===ze&&(_="/"),X.replace({path:ze,query:{redirect:_}}),D((a==null?void 0:a.msg)||"登录超时啦~"),Promise.reject(a)}return a!=null&&a.msg&&D((a==null?void 0:a.msg)||"网络错误~"),Promise.reject(a)}else return o||l||c||i?Promise.resolve(a):Promise.reject(a)},An=t=>{if(t.response){const{status:e}=t.response;e===401?le("/exception",{code:401}):e===403?le("/exception",{code:403}):e===500?le("/exception",{code:500}):e===502&&le("/exception",{code:502})}return Promise.reject(t)};Z.interceptors.request.use(In);Z.interceptors.response.use(Dn,An);const jn=Object.freeze(Object.defineProperty({__proto__:null,baseURL:ft,default:Z,instance:Z},Symbol.toStringTag,{value:"Module"})),he=(t,e,a)=>Z.request({url:t,params:e,method:"GET",...a}),xe=(t,e,a)=>Z.request({url:t,data:e,method:"POST",...a}),Ne=(t,e,a)=>Z.request({url:t,data:e,method:"PUT",...a}),We=(t,e,a)=>Z.request({url:t,data:e,method:"DELETE",...a}),Sn=I({__name:"index",props:{modelValue:{},api:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=ue(),s=g(""),o=g(!1),l=g([]),c=u=>{if(u){o.value=!0;const d={...n.query,keyword:u};he(a.api,d).then(f=>{l.value=f.data||[]}).finally(()=>{o.value=!1})}else l.value=[]},i=()=>{e("update:modelValue",s.value)};return(u,d)=>{const f=V("el-option"),v=V("el-select");return m(),$(v,{modelValue:r(s),"onUpdate:modelValue":d[0]||(d[0]=_=>se(s)?s.value=_:null),"remote-method":c,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"",loading:r(o),onChange:i},{default:P(()=>[(m(!0),y(O,null,Q(r(l),(_,p)=>(m(),$(f,F({key:p},_),null,16))),128))]),_:1},8,["modelValue","loading"])}}}),Tn=I({__name:"index",props:{title:{},style:{default:{}}},setup(t){return(e,a)=>(m(),y("div",{class:"form-title",style:pt(e.style)},L(e.title),5))}});const Vn=R(Tn,[["__scopeId","data-v-2aa60f17"]]),En=I({__name:"index",props:{modelValue:{},style:{default:{}},player:{}},setup(t){const e=t,a=S(()=>(e==null?void 0:e.style)??{}),n=S(()=>{var s;return e!=null&&e.player?{...e.player,video:{...((s=e.player)==null?void 0:s.video)??{},url:e.modelValue}}:{video:{url:e.modelValue}}});return ie(()=>{const s=document.getElementById("dplayer");new Ba({container:s,...n.value})}),(s,o)=>(m(),y("div",{id:"dplayer",style:pt(r(a))},null,4))}});const Bn=R(En,[["__scopeId","data-v-e29c7286"]]),Mn={class:"xb-alert"},Rn=I({__name:"index",props:{content:{},type:{default:"warning"},closable:{type:Boolean,default:!1},effect:{default:"dark"}},setup(t){return(e,a)=>{const n=V("el-alert");return m(),$(n,{type:e.type,closable:e.closable,effect:e.effect},{default:P(()=>[b("div",Mn,[(m(!0),y(O,null,Q(e.content,(s,o)=>(m(),y("div",{key:o},L(s),1))),128))])]),_:1},8,["type","closable","effect"])}}}),Tt={amap:To,bmap:Bo,icons:cn,qmap:Uo,remote:vn,uploadify:Cn,info:un,HCode:Ho,PromptTip:hn,wangEditor:St,tinymceEditor:St,XInput:mn,XTable:xn,XSearch:Sn,XTitle:Vn,XVideo:Bn,XAlert:Rn},Un=t=>{Object.keys(Tt).forEach(e=>{t.component(e,Tt[e])})},ht=I({__name:"index",props:{api:{default:""},method:{default:"GET"},ajaxParams:{},isModal:{type:Boolean}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{expose:e,emit:a}){const n=t,s=ue(),o=ke(),l=g({}),c=g({api:"",method:"POST"}),i=g({}),u=g(),d=g(Io),f=g("");$t.use(Un);const v=$t.$form(),_=()=>{const x=g({method:n.method,params:{...n.ajaxParams},data:{...n.ajaxParams}});n.method==="GET"?delete x.value.data:delete x.value.params,a("update:init"),Z(n.api,x.value).then(C=>{const{data:j}=C;if(!(j!=null&&j.http))return D("提交接口获取失败"),Promise.reject(new Error("提交接口获取失败"));if(!(j!=null&&j.formRule))return D("表单规则获取失败"),Promise.reject(new Error("表单规则获取失败"));c.value=j.http,u.value=Ao(j.formRule),d.value={...d.value,...j.config},f.value=(j==null?void 0:j.redirect)??"",a("update:init-ok",{response:j,exposed:o.exposed})}).catch(C=>{a("update:init-error",C)})},p=async()=>{var C,j,E;const x=g({method:((C=c.value)==null?void 0:C.method)??"GET",params:{...n.ajaxParams},data:{}});return((j=c.value)==null?void 0:j.method)==="GET"?x.value.params={...x.value.params,...i.value}:x.value.data={...x.value.data,...i.value},a("update:submit",{api:c.value.api,queryParams:x}),await Z(((E=c.value)==null?void 0:E.api)??"",x.value).then(M=>{var w;return(w=s.query)!=null&&w.isBack&&!n.isModal&&!f.value?Qe():f.value&&le(f.value),a("update:submit-ok",M),Y((M==null?void 0:M.msg)??"操作失败"),M}).catch(M=>(a("update:submit-error",M),M))},h=()=>{a("update:rest-ok")};return ie(()=>_()),e({init:_,submit:p,reset:h}),(x,C)=>(m(),$(r(v),{api:r(l),"onUpdate:api":C[0]||(C[0]=j=>se(l)?l.value=j:null),modelValue:r(i),"onUpdate:modelValue":C[1]||(C[1]=j=>se(i)?i.value=j:null),modelModifiers:{lazy:!0},rule:r(u),option:r(d),title:""},null,8,["api","modelValue","rule","option"]))}}),Ln={class:"xh-modal-container"},Fn=I({__name:"info-modal",props:{api:{default:""},method:{default:"GET"},ajaxParams:{default:void 0},isModal:{type:Boolean}},setup(t){const e=g(),a=g({submitBtn:{},resetBtn:{}}),n=s=>{var l;const o=(l=s==null?void 0:s.response)==null?void 0:l.extraConfig;a.value=o};return(s,o)=>(m(),y("div",Ln,[k(r(ht),{ref_key:"formRef",ref:e,class:"xh-form-create",api:s.api,method:s.method,"ajax-params":s.ajaxParams,"is-modal":!0,"onUpdate:initOk":n},null,8,["api","method","ajax-params"])]))}});const vt=R(Fn,[["__scopeId","data-v-be00eddc"]]),On={class:"xh-modal-container"},qn={class:"xh-modal-content"},Hn=I({__name:"form-modal",props:{api:{default:""},method:{default:"GET"},ajaxParams:{default:void 0},isModal:{type:Boolean}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{expose:e,emit:a}){const n=ke(),s=g();g({submitBtn:{},resetBtn:{}});const o=v=>{a("update:init-ok",n.exposed)},l=v=>{a("update:init-error",n.exposed)},c=()=>{a("update:submit-ok")},i=()=>{a("update:submit-error")},u=()=>{a("update:rest-ok")};return e({hanldSubmit:async()=>await s.value.submit(),hanldReset:()=>{s.value.reset(),a("update:rest")}}),(v,_)=>(m(),y("div",On,[b("div",qn,[k(r(ht),{ref_key:"formRef",ref:s,class:"xh-form-create",api:v.api,method:v.method,"ajax-params":v.ajaxParams,"is-modal":!0,"onUpdate:initOk":o,"onUpdate:submitOk":c,"onUpdate:submitError":i,"onUpdate:restOk":u,"onUpdate:initError":l},null,8,["api","method","ajax-params"])])]))}});const gt=R(Hn,[["__scopeId","data-v-283ef23e"]]),zn=I({__name:"xh-button",props:{type:{default:"default"},text:{type:Boolean}},setup(t){const e=t,a=S(()=>e.text?"":`xh-button-${e.type}`);return(n,s)=>(m(),y("button",{class:pe(["xh-button",r(a)])},[de(n.$slots,"loading",{},void 0,!0),de(n.$slots,"icon",{},void 0,!0),de(n.$slots,"default",{},void 0,!0)],2))}});const Nn=R(zn,[["__scopeId","data-v-5baade3e"]]),yt=I({__name:"index",props:{type:{default:"default"}},setup(t){const e=t,a=["error","purple","cyan"],n=S(()=>a.includes(e.type));return(s,o)=>{const l=V("el-button");return r(n)?(m(),$(Nn,{key:0,type:s.type},{default:P(()=>[de(s.$slots,"loading"),de(s.$slots,"icon"),de(s.$slots,"default")]),_:3},8,["type"])):(m(),$(l,{key:1,type:s.type},{default:P(()=>[de(s.$slots,"loading"),de(s.$slots,"icon"),de(s.$slots,"default")]),_:3},8,["type"]))}}}),Wn=I({__name:"buttons",props:{extraConfig:{}},emits:["update:init","update:submit","update:rest"],setup(t,{expose:e,emit:a}){const n=ke(),s=g(!1),o=i=>{s.value=i},l=()=>{o(!0),a("update:submit")},c=()=>{o(!0),a("update:rest")};return ie(()=>{a("update:init",{exposed:n.exposed})}),e({setDisabled:o}),(i,u)=>{var v;const d=yt,f=V("el-space");return(v=i.extraConfig.submitBtn)!=null&&v.show?(m(),$(f,{key:0,alignment:"center",class:"footer-buttons",size:[30,0]},{default:P(()=>{var _,p,h,x;return[(_=i.extraConfig.submitBtn)!=null&&_.show?(m(),$(d,F({key:0,type:"primary",class:"xh-extra-button"},((p=i.extraConfig)==null?void 0:p.submitBtn)??{},{loading:r(s),disabled:r(s),onClick:l}),{default:P(()=>{var C;return[q(L(r(s)?"请求中...":((C=i.extraConfig.submitBtn)==null?void 0:C.content)??"提交"),1)]}),_:1},16,["loading","disabled"])):B("",!0),(h=i.extraConfig.resetBtn)!=null&&h.show?(m(),$(d,F({key:1,type:"warning",class:"xh-extra-button"},((x=i.extraConfig)==null?void 0:x.resetBtn)??{},{disabled:r(s),onClick:c}),{default:P(()=>{var C;return[q(L(((C=i.extraConfig.resetBtn)==null?void 0:C.content)??"重置"),1)]}),_:1},16,["disabled"])):B("",!0)]}),_:1})):B("",!0)}}});const Xn=R(Wn,[["__scopeId","data-v-c3072cde"]]),te=(t,e)=>{const a=t.field;let n=e[a];if(a.includes(".")){const s=a.split(".");let o=e;s.forEach(l=>{o=o[l]}),n=o}return n},Te=(t,e,a,n=!0)=>{if(!t){D("请设置请求API接口"),a==null||a.commitProxy("query");return}Ne(t,e).then(s=>{a==null||a.commitProxy("query"),n&&Y((s==null?void 0:s.msg)??"操作成功")})},Qn=(t,e,a,n)=>{var c,i;const s=((c=a==null?void 0:a.rowConfig)==null?void 0:c.keyField)??"id",o=e[t==null?void 0:t.field],l={[s]:e[s],keyField:s,field:t==null?void 0:t.field,value:o};Te((i=t==null?void 0:t.params)==null?void 0:i.api,l,n)},Zn=["innerHTML"],Gn=["innerHTML"],Jn=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var l,c,i,u,d,f;const e=t,a=S(()=>te(e.column,e.row)),n=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.prefix)??""),s=g(((u=(i=e.column)==null?void 0:i.params)==null?void 0:u.suffix)??""),o=g(((f=(d=e.column)==null?void 0:d.params)==null?void 0:f.props)??{});return(v,_)=>(m(),y("div",F(r(o),{class:"flex items-center"}),[r(n)?(m(),y("div",{key:0,innerHTML:r(n)},null,8,Zn)):B("",!0),b("div",null,L(r(a)),1),r(s)?(m(),y("div",{key:1,innerHTML:r(s)},null,8,Gn)):B("",!0)],16))}}),Yn=(t,e,a,n,s)=>{var f,v;a==null||a.xGrid;const o=a==null?void 0:a.form,l=a==null?void 0:a.page,c=a==null?void 0:a.sort,i=a==null?void 0:a.filters;a!=null&&a.code&&((f=n.screenConfig)!=null&&f.api)&&(t=(v=n.screenConfig)==null?void 0:v.api);const u=X.currentRoute.value,d=g({method:e,params:{page:l.currentPage??1,limit:l.pageSize??20,...s??{},...o,...(u==null?void 0:u.query)??{}}});return JSON.stringify(c)!=="{}"&&d.value.params&&(d.value.params={...d.value.params,field:c.field,order:c.order}),i.length>0&&d.value.params&&i.forEach(({field:_,values:p})=>{d.value.params={...d.value.params,[_]:p.join(",")}}),new Promise((_,p)=>{Z(t,d.value).then(h=>{_(h)}).catch(h=>{p(h)})})},Kn=(t,e,a)=>{Z(a.file,{responseType:"blob"}).then(n=>{Ma.saveFile({filename:t,type:e,content:n.data})})},es=(t,e,a)=>new Promise((n,s)=>{var c;if(!((c=e.exportConfig)!=null&&c.api))return D("请设置请求API"),Promise.reject(new Error("请设置请求API"));const o=a==null?void 0:a.getProxyInfo(),l={format:t.type??"xlsx",filename:t.filename??"导出文件",sheetName:t.sheetName??"",isHeader:t.isHeader??!1,original:t.original??!1,mode:t.mode??"all",pager:o?o.pager:null,ids:t.mode==="selected"?t.data.map(i=>i.id):[],fields:t.columns.map(i=>({field:i.field,title:i.title}))};return new Promise(i=>{var f;const u={method:"POST",data:{...l}},d=((f=e.exportConfig)==null?void 0:f.api)??"";Z(d,u).then(v=>{const{data:_}=v;if(!(_!=null&&_.file))return D("导出数据失败，缺少[file]地址"),Promise.reject(new Error("导出数据失败，缺少导出地址"));Kn(l.filename,l.format,_),i(v)})})}),ts=(t,e,a)=>{const n=new FormData;return n.append("file",t.file),new Promise(s=>{var c;const o=((c=e.importConfig)==null?void 0:c.api)??"";Z(o,{method:"POST",data:n}).then(i=>{const{msg:u}=i;Y(u||"操作成功"),a==null||a.commitProxy("query"),s(i)}).catch(i=>{console.error("导入失败",i)})})},as=(t,e,a)=>new Promise(n=>{const s=new FileReader;s.onload=o=>{const l=o.target?o.target.result:"",c=Ra(l,{type:"binary"}),i=Ua.sheet_to_json(c.Sheets.Sheet1);t.$table.loadData(i),Y("已将数据导入至本地表格"),n(i)},s.readAsBinaryString(t.file)}),os=(t,e,a)=>{var n,s;return(n=e.importConfig)!=null&&n.api&&((s=e.importConfig)!=null&&s.isRemote)?ts(t,e,a):as(t)},ns=(t,e,a,n,s)=>{const o={...a.toolbarConfig,slots:{buttons:"topButtonList"}};return a.toolbarConfig=o,o!=null&&o.import&&(a.importConfig={...a.importConfig,remote:!0,importMethod:l=>os(l,a,s)}),o!=null&&o.export&&(a.exportConfig={...a.exportConfig,remote:!0,exportMethod:l=>es(l,a,s)}),a.proxyConfig={...a.proxyConfig,ajax:{query:l=>Yn(t,e,l,a,n)}},a},ss=(t,e)=>{let a={};for(const n in t){const s=t[n]||"id";a={...a,[s]:e[n]||""}}return a},Ue=(t,e,a)=>{var l,c;const n=X.currentRoute.value;let o={...((l=t==null?void 0:t.pageData)==null?void 0:l.queryParams)??{},...n.query};return(c=t.pageData)!=null&&c.isBack&&(o={...o,isBack:1}),o},ls=(t,e,a,n,s)=>{var u,d,f,v,_;const o=X.currentRoute.value,l=((u=t==null?void 0:t.pageData)==null?void 0:u.queryParams)??{},c=g({...o.query}),i=g({...c.value});if(l instanceof Object&&(i.value={...i.value,...l}),a&&!["[]","{}"].includes(JSON.stringify((d=t==null?void 0:t.pageData)==null?void 0:d.aliasParams)))i.value={...i.value,...ss((f=t==null?void 0:t.pageData)==null?void 0:f.aliasParams,a)};else{const p=((v=n==null?void 0:n.rowConfig)==null?void 0:v.keyField)??"id";if(!a[p]){D("当前数据错误");return}const h=a[p];i.value={...i.value,[p]:h}}return(_=t.pageData)!=null&&_.isBack&&(i.value={...i.value,isBack:1}),i.value},cs=(t,e,a)=>{var s,o;if(!((s=t==null?void 0:t.pageData)!=null&&s.path)){D("缺少跳转地址");return}const n=Ue(t);X.push({path:(o=t==null?void 0:t.pageData)==null?void 0:o.path,query:{...n}})},rs=(t,e,a,n)=>{var s,o;if(!((s=t==null?void 0:t.pageData)!=null&&s.path)){D("缺少跳转地址");return}X.push({path:(o=t==null?void 0:t.pageData)==null?void 0:o.path,query:{...e}})},Be=t=>{wt(t)||(t=`${window.location.origin}/${t}`),window.open(t)},is=(t,e,a)=>{var i,u,d;const n=((i=t==null?void 0:t.pageData)==null?void 0:i.api)??"",s=((u=t.pageData)==null?void 0:u.method)??"GET";let o=((d=t.pageData)==null?void 0:d.path)??"";const l=Ue(t),c={method:s,params:{},data:{}};if(s==="GET"?c.params=l:c.data=l,o){Be(o);return}Z(n,c).then(f=>{const{data:v}=f;if(!(v!=null&&v.url)){D("缺少目标跳转地址");return}o=v.url,Be(o)})},us=(t,e,a,n)=>{var d,f,v,_,p;const s=((d=t==null?void 0:t.pageData)==null?void 0:d.api)??"",o=((f=t.pageData)==null?void 0:f.method)??"GET";let l=((v=e.checkboxConfig)==null?void 0:v.labelField)??"";l||(l=((_=e==null?void 0:e.rowConfig)==null?void 0:_.keyField)??"id");let c=((p=t.pageData)==null?void 0:p.path)??"";const i=Ue(t),u={method:o,params:{},data:{}};if(o==="GET"?u.params={...i,[l]:a}:u.data={...i,[l]:a},c){Be(c);return}Z(s,u).then(h=>{const{data:x}=h;if(!(x!=null&&x.url)){D("缺少目标跳转地址");return}c=x.url,Be(c)})},ds=(t,e,a,n)=>{var i,u,d;const s=((i=t==null?void 0:t.pageData)==null?void 0:i.api)??"",o=((u=t.pageData)==null?void 0:u.method)??"GET";let l=((d=t.pageData)==null?void 0:d.path)??"";const c=g({method:o,params:{...e},data:{...e}});if(o==="GET"?delete c.value.data:delete c.value.params,l){window.open(l);return}Z(s,c.value).then(f=>{const{data:v}=f;if(!(v!=null&&v.url)){D("缺少目标跳转地址");return}l=v.url,Be(l)})},Ye=(t,e)=>La.service({text:t,lock:!0,background:"rgba(0, 0, 0, 0.7)",...e}),ps=(t,e,a)=>{var l,c,i,u;if(!(((l=t.message)==null?void 0:l.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const s=g(),o={api:((c=t.pageData)==null?void 0:c.api)||"",method:((i=t.pageData)==null?void 0:i.method)||"GET",ajaxParams:((u=t.pageData)==null?void 0:u.queryParams)||{},"onUpdate:init-ok":d=>{s.value=d}};_e(gt,o,{...t.message,beforeClose:(d,f,v)=>{var _;if(d==="confirm"){const p=Ye("正在提交中...");(_=s.value)==null||_.hanldSubmit().then(h=>{(h==null?void 0:h.code)===200&&(v(),a==null||a.commitProxy("reload"))}).finally(()=>{p.close()})}d==="cancel"&&(v(),a==null||a.commitProxy("reload"))}})},ms=(t,e,a,n)=>{var i,u,d,f,v;if(!(((i=t.message)==null?void 0:i.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const o=g(),l=g({api:((u=t.pageData)==null?void 0:u.api)||"",method:((d=t.pageData)==null?void 0:d.method)||"GET",ajaxParams:{...e},"onUpdate:init-ok":_=>{o.value=_}}),c=((f=t.pageData)==null?void 0:f.queryParams)??"";c instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...c}),(v=l.value.ajaxParams)!=null&&v.isBack&&delete l.value.ajaxParams.isBack,_e(gt,l.value,{...t.message,beforeClose:(_,p,h)=>{var x;if(_==="confirm"){const C=Ye("正在提交中...");(x=o.value)==null||x.hanldSubmit().then(j=>{(j==null?void 0:j.code)===200&&(h(),n==null||n.commitProxy("reload"))}).finally(()=>{C.close()})}_==="cancel"&&(h(),n==null||n.commitProxy("reload"))}})},_s=(t,e,a,n)=>{var c,i,u,d,f,v,_;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({api:(d=t.pageData)==null?void 0:d.api,method:((f=t.pageData)==null?void 0:f.method)||"GET",ajaxParams:{[o]:a},"onUpdate:submit-ok":()=>{jt(),n==null||n.commitProxy("reload")},"onUpdate:rest-ok":()=>{jt(),n==null||n.commitProxy("reload")}});((v=t.pageData)==null?void 0:v.queryParams)instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...(_=t.pageData)==null?void 0:_.queryParams}),_e(gt,l.value,{...t.message,beforeClose:(p,h,x)=>{x(),n==null||n.commitProxy("reload")}})},ve=(t,e="温馨提示",a="",n)=>re.confirm(t,e,{confirmButtonText:"确定",cancelButtonText:"取消",type:a,...n}),fs=(t,e,a)=>{var d,f,v,_,p;const n=(d=t.pageData)==null?void 0:d.api,s=((f=t.pageData)==null?void 0:f.method)??"GET",o=Ue(t);o!=null&&o.isBack&&delete o.isBack;const l=g({method:s,params:{...o},data:{...o}});s==="GET"?delete l.value.data:delete l.value.params;const c=((v=t.message)==null?void 0:v.content)??"",i=((_=t.message)==null?void 0:_.title)??"",u=((p=t.message)==null?void 0:p.type)??"";if(!n){D("接口地址不存在");return}ve(c,i,u).then(()=>{Z(n,l.value).then(h=>{Y((h==null?void 0:h.msg)??"操作成功"),a==null||a.commitProxy("reload")})})},hs=(t,e,a,n)=>{var v,_,p,h,x,C,j;const s=(v=t.pageData)==null?void 0:v.api,o=((_=t.pageData)==null?void 0:_.method)??"GET",l=Ue(t);l!=null&&l.isBack&&delete l.isBack;let c=((p=e.checkboxConfig)==null?void 0:p.labelField)??"";c||(c=((h=e==null?void 0:e.rowConfig)==null?void 0:h.keyField)??"id");const i=g({method:o,params:{...l,[c]:a},data:{...l,[c]:a}});o==="GET"?delete i.value.data:delete i.value.params;const u=((x=t.message)==null?void 0:x.content)??"",d=((C=t.message)==null?void 0:C.title)??"",f=((j=t.message)==null?void 0:j.type)??"";if(!s){D("接口地址不存在");return}ve(u,d,f).then(()=>{Z(s,i.value).then(E=>{Y((E==null?void 0:E.msg)??"操作成功"),n==null||n.commitProxy("reload")})})},vs=(t,e,a,n)=>{var v,_,p,h,x,C,j,E;const s=(v=t.pageData)==null?void 0:v.api,o=((_=t.pageData)==null?void 0:_.method)??"GET";let l=((p=a.checkboxConfig)==null?void 0:p.labelField)??"";l||(l=((h=a==null?void 0:a.rowConfig)==null?void 0:h.keyField)??"id");const c=g({method:o,params:{...e},data:{...e}});o==="GET"?delete c.value.data:delete c.value.params;const i=((x=t.message)==null?void 0:x.content)??"",u=((C=t.message)==null?void 0:C.title)??"",d=((j=t.message)==null?void 0:j.type)??"",f=((E=t.message)==null?void 0:E.loading)??"正在处理中";if(!s){D("接口地址不存在");return}ve(i,u,d).then(()=>{const M=Ye(f);Z(s,c.value).then(w=>{Y((w==null?void 0:w.msg)??"操作成功"),n==null||n.commitProxy("reload")}).finally(()=>{M.close()})})},gs=(t,e,a)=>{var o,l,c;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}const s={file:((l=t.pageData)==null?void 0:l.path)||"",ajaxParams:((c=t.pageData)==null?void 0:c.queryParams)||{},"onUpdate:close":()=>{re.close(),a==null||a.commitProxy("reload")}};me(Ke,s,{...t.message,beforeClose:(i,u,d)=>{d(),a==null||a.commitProxy("reload")}})},ys=(t,e,a,n)=>{var c,i,u,d,f,v;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({file:(d=t.pageData)==null?void 0:d.path,ajaxParams:{[o]:a},"onUpdate:close":()=>{re.close(),n==null||n.commitProxy("reload")}});((f=t.pageData)==null?void 0:f.queryParams)instanceof Object&&(l.value.ajaxParams={...(v=t.pageData)==null?void 0:v.queryParams}),me(Ke,l.value,{...t.message,beforeClose:(_,p,h)=>{h(),n==null||n.commitProxy("reload")}})},xs=(t,e,a,n)=>{var l,c;if(!(((l=t.message)==null?void 0:l.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}const o=g({file:(c=t.pageData)==null?void 0:c.path,ajaxParams:e,"onUpdate:close":()=>{re.close(),n==null||n.commitProxy("reload")}});me(Ke,o.value,{...t.message,beforeClose:(i,u,d)=>{d(),n==null||n.commitProxy("reload")}})},ks=(t,e,a)=>{var o,l,c,i;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供信息模态框接口");return}const s={api:((l=t.pageData)==null?void 0:l.api)||"",method:((c=t.pageData)==null?void 0:c.method)||"GET",ajaxParams:((i=t.pageData)==null?void 0:i.queryParams)||{}};me(vt,s,{...t.message,beforeClose:(u,d,f)=>{f(),a==null||a.commitProxy("reload")}})},ws=(t,e,a,n)=>{var i,u,d,f,v,_;if(!(((i=t.message)==null?void 0:i.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((u=e.checkboxConfig)==null?void 0:u.labelField)??"";o||(o=((d=e==null?void 0:e.rowConfig)==null?void 0:d.keyField)??"id");const l=g({api:(f=t.pageData)==null?void 0:f.api,method:((v=t.pageData)==null?void 0:v.method)||"GET",ajaxParams:{[o]:a}}),c=((_=t==null?void 0:t.pageData)==null?void 0:_.queryParams)??"";c instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...c}),me(vt,l.value,{...t.message,beforeClose:(p,h,x)=>{x(),n==null||n.commitProxy("reload")}})},bs=(t,e,a,n)=>{var c,i,u,d,f;if(!(((c=t.message)==null?void 0:c.title)||"")){D("信息模态框标题不能为空");return}if(!t.pageData.api){D("请提供信息模态框接口");return}const o=g({api:((i=t.pageData)==null?void 0:i.api)||"",method:((u=t.pageData)==null?void 0:u.method)||"GET",ajaxParams:{...e}}),l=((d=t.pageData)==null?void 0:d.queryParams)??"";l instanceof Object&&(o.value.ajaxParams={...o.value.ajaxParams,...l}),(f=o.value.ajaxParams)!=null&&f.isBack&&delete o.value.ajaxParams.isBack,me(vt,o.value,{...t.message,beforeClose:(v,_,p)=>{p(),n==null||n.commitProxy("reload")}})},Cs=(t,e,a)=>{var o,l,c,i;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供表格模态框接口");return}const s={api:((l=t.pageData)==null?void 0:l.api)||"",method:((c=t.pageData)==null?void 0:c.method)||"GET",ajaxParams:((i=t.pageData)==null?void 0:i.queryParams)||{}};me(kt,s,{...t.message,beforeClose:(u,d,f)=>{f(),a==null||a.commitProxy("reload")}})},Ps=(t,e,a,n)=>{var c,i,u,d,f,v,_;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({api:(d=t.pageData)==null?void 0:d.api,method:((f=t.pageData)==null?void 0:f.method)||"GET",ajaxParams:{[o]:a}});((v=t.pageData)==null?void 0:v.queryParams)instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...(_=t.pageData)==null?void 0:_.queryParams}),me(kt,l.value,{...t.message,beforeClose:(p,h,x)=>{x(),n==null||n.commitProxy("reload")}})},$s=(t,e,a,n)=>{var c,i,u,d;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const o=g({api:(i=t.pageData)==null?void 0:i.api,method:((u=t.pageData)==null?void 0:u.method)||"GET",ajaxParams:{...e}}),l=((d=t==null?void 0:t.pageData)==null?void 0:d.queryParams)??"";l instanceof Object&&(o.value.ajaxParams={...o.value.ajaxParams,...l}),me(kt,o.value,{...t.message,beforeClose:(f,v,_)=>{_(),n==null||n.commitProxy("reload")}})},Is=(t,e,a,n)=>{},Ds=(t,e,a)=>{var n;switch((n=e.pageData)==null?void 0:n.type){case"page":cs(e);break;case"link":is(e);break;case"down":break;case"confirm":fs(e,t,a);break;case"modal":ps(e,t,a);break;case"info":ks(e,t,a);break;case"table":Cs(e,t,a);break;case"remote":gs(e,t,a);break;default:D("按钮类型错误");break}},As=(t,e,a)=>{var c,i,u,d;const n=(c=t.columns)==null?void 0:c.filter(f=>f.type==="checkbox");if(!(n!=null&&n.length)){D("请先开启批量操作");return}const s=(a==null?void 0:a.getCheckboxRecords())??[];if(s.length<=0){D("请选择数据");return}let o=((i=t.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=t==null?void 0:t.rowConfig)==null?void 0:u.keyField)??"id");const l=s.map(f=>f[o]);switch((d=e.pageData)==null?void 0:d.type){case"link":us(e,t,l);break;case"down":break;case"confirm":hs(e,t,l,a);break;case"remote":ys(e,t,l,a);break;case"modal":_s(e,t,l,a);break;case"info":ws(e,t,l,a);break;case"table":Ps(e,t,l,a);break;default:D("按钮类型错误");break}},Vt=(t,e,a,n,s)=>{var c,i;if(!n){D("行参数出错");return}const o=g({}),l=((c=e.pageData)==null?void 0:c.queryParams)??"";switch(l instanceof Object&&(o.value={...l}),o.value={...o.value,...ls(e,a,n,t)},(i=e.pageData)==null?void 0:i.type){case"page":rs(e,o.value);break;case"link":ds(e,o.value);break;case"down":Is(e,o.value);break;case"confirm":vs(e,o.value,t,s);break;case"modal":ms(e,o.value,t,s);break;case"info":bs(e,o.value,t,s);break;case"table":$s(e,o.value,t,s);break;case"remote":xs(e,o.value,t,s);break;default:D("按钮类型错误");break}};const js=()=>{const t=fe(),e=Ie(),a=(t==null?void 0:t.routeList)??[],n=[];for(const s of a){const o=`${e}${s.path}`;n.push(o)}return n},xt=t=>{const e=js();return Xe(t,e)},Ss={class:"button-group"},Ts={class:"pr-1"},Vs={class:"no-group-buttons"},Es=I({__name:"index",props:{xGrid:{},column:{},rightButtonList:{},gridConfig:{},row:{}},setup(t){var _;const e=t,a=S(()=>{var p;return((p=e.column.params)==null?void 0:p.buttonGroupIcon)??"Operation"}),n=S(()=>{var p;return((p=e.column.params)==null?void 0:p.buttonGroupIconType)??"element"}),s={type:"primary",size:"small"},o=g(((_=e.column.params)==null?void 0:_.buttonStyle)??s),l=S(()=>e.rightButtonList.filter(p=>{var x,C,j,E,M,w,A,T,z,K;const h=((x=p.pageData)==null?void 0:x.group)||((C=e.column.params)==null?void 0:C.group);return(E=(j=p.pageData)==null?void 0:j.params)!=null&&E.field&&((w=(M=p.pageData)==null?void 0:M.params)!=null&&w.value)&&h?(e.row[(T=(A=p.pageData)==null?void 0:A.params)==null?void 0:T.field]||"")===((K=(z=p.pageData)==null?void 0:z.params)==null?void 0:K.value):h})),c=S(()=>e.rightButtonList.filter(p=>{var h;return!((h=p.pageData)!=null&&h.group)})),i=S(()=>{var p;return((p=e.column.params)==null?void 0:p.groupText)||"更多"}),u=S(()=>p=>{var M,w,A,T,z,K,oe;const h=((M=p.pageData)==null?void 0:M.api)??"";if(!xt(h))return!1;const x=((A=(w=p==null?void 0:p.pageData)==null?void 0:w.params)==null?void 0:A.where)??"",C=(z=(T=p==null?void 0:p.pageData)==null?void 0:T.params)==null?void 0:z.field,j=(oe=(K=p==null?void 0:p.pageData)==null?void 0:K.params)==null?void 0:oe.value;if(C===void 0&&j===void 0)return!0;if(C===void 0||C===""||C&&(j===void 0||j===""))return!1;const E=e.row[C];switch(x){case"!=":return j!==E;case"in":return j instanceof Array&&Xe(E,j);case"notIn":return j instanceof Array&&!Xe(E,j);default:return j===E}}),d=S(()=>p=>{const h={...p};return h!=null&&h.icon&&delete h.icon,h}),f=p=>{Vt(e.gridConfig,p,e.column,e.row,e.xGrid)},v=p=>{Vt(e.gridConfig,p,e.column,e.row,e.xGrid)};return(p,h)=>{const x=J,C=V("el-button"),j=V("el-dropdown-item"),E=V("el-dropdown-menu"),M=V("el-dropdown");return m(),y("div",Ss,[r(l).length?(m(),$(M,{key:0,class:"mr-2",onCommand:f},{dropdown:P(()=>[k(E,null,{default:P(()=>[(m(!0),y(O,null,Q(r(l),(w,A)=>(m(),y(O,{key:A},[r(u)(w)?(m(),$(j,{key:0,command:w},{default:P(()=>{var T,z,K;return[(T=w==null?void 0:w.button)!=null&&T.icon?(m(),$(x,{key:0,icon:(z=w==null?void 0:w.button)==null?void 0:z.icon,type:(K=w==null?void 0:w.button)==null?void 0:K.iconType},null,8,["icon","type"])):B("",!0),b("span",null,L(w.title),1)]}),_:2},1032,["command"])):B("",!0)],64))),128))]),_:1})]),default:P(()=>[k(C,F({type:"danger"},r(o)),{default:P(()=>[b("span",Ts,L(r(i)),1),r(a)?(m(),$(x,{key:0,icon:r(a),type:r(n)},null,8,["icon","type"])):B("",!0)]),_:1},16)]),_:1})):B("",!0),b("div",Vs,[(m(!0),y(O,null,Q(r(c),(w,A)=>{var T;return Wt((m(),y("div",{key:A,class:"item"},[(m(),$(C,F({key:A},r(d)((w==null?void 0:w.button)??{}),{onClick:z=>v(w)}),Ge({default:P(()=>[q(" "+L(w.title),1)]),_:2},[(T=w==null?void 0:w.button)!=null&&T.icon?{name:"icon",fn:P(()=>{var z,K,oe;return[(z=w==null?void 0:w.button)!=null&&z.icon?(m(),$(x,{key:0,icon:(K=w==null?void 0:w.button)==null?void 0:K.icon,type:((oe=w==null?void 0:w.button)==null?void 0:oe.iconType)??""},null,8,["icon","type"])):B("",!0)]}),key:"0"}:void 0]),1040,["onClick"]))])),[[Xt,r(u)(w)]])}),128))])])}}});const Bs=R(Es,[["__scopeId","data-v-f5cb3161"]]),Ms={class:"flex space-x-2"},Rs=I({__name:"index",props:{xGrid:{},topButtonList:{},gridConfig:{}},setup(t){const e=t,a=S(()=>e.topButtonList.filter(s=>{var o;return!((o=s.pageData)!=null&&o.group)})),n=S(()=>s=>{var l;const o=((l=s.pageData)==null?void 0:l.api)??"";return!!xt(o)});return(s,o)=>{const l=J,c=V("el-button"),i=V("el-space");return m(),y("div",Ms,[r(a).length?(m(),$(i,{key:0},{default:P(()=>[(m(!0),y(O,null,Q(r(a),(u,d)=>{var f;return m(),y(O,null,[r(n)(u)?(m(),$(c,F({key:d},(u==null?void 0:u.button)??{},{onClick:v=>r(Ds)(e.gridConfig,u,s.xGrid)}),Ge({default:P(()=>[q(" "+L(u.title),1)]),_:2},[(f=u==null?void 0:u.button)!=null&&f.icon?{name:"icon",fn:P(()=>{var v,_;return[k(l,{icon:(v=u==null?void 0:u.button)==null?void 0:v.icon,type:(_=u==null?void 0:u.button)==null?void 0:_.iconType},null,8,["icon","type"])]}),key:"0"}:void 0]),1040,["onClick"])):B("",!0)],64)}),256))]),_:1})):B("",!0)])}}}),Us={class:"flex space-x-2"},Ls=I({__name:"index",props:{xGrid:{},gridConfig:{},selectButtonList:{}},setup(t){const e=t,a=S(()=>{var o;return((o=e.selectButtonList)==null?void 0:o.filter(l=>{var c;return!((c=l.pageData)!=null&&c.group)}))||[]}),n=S(()=>o=>{const l={...o};return l!=null&&l.icon&&delete l.icon,l}),s=S(()=>o=>{var c;const l=((c=o.pageData)==null?void 0:c.api)??"";return!!xt(l)});return(o,l)=>{const c=J,i=yt,u=V("el-space");return m(),y("div",Us,[r(a).length?(m(),$(u,{key:0},{default:P(()=>[(m(!0),y(O,null,Q(r(a),(d,f)=>{var v;return m(),y(O,null,[r(s)(d)?(m(),$(i,F({key:f,type:"primary"},r(n)((d==null?void 0:d.button)??{}),{onClick:_=>r(As)(e.gridConfig,d,o.xGrid)}),Ge({default:P(()=>[q(" "+L(d.title),1)]),_:2},[(v=d==null?void 0:d.button)!=null&&v.icon?{name:"icon",fn:P(()=>{var _,p;return[k(c,{icon:(_=d==null?void 0:d.button)==null?void 0:_.icon,type:(p=d==null?void 0:d.button)==null?void 0:p.iconType},null,8,["icon","type"])]}),key:"0"}:void 0]),1040,["onClick"])):B("",!0)],64)}),256))]),_:1})):B("",!0)])}}}),Fs={class:"flex space-x-3"},Os={key:1,class:"flex space-x-1"},qs=I({__name:"index",props:{xGrid:{},gridConfig:{},topButton:{},topButtonList:{},selectButtonList:{}},setup(t){const e=ue();return(a,n)=>{var o,l,c;const s=yt;return m(),y("div",Fs,[(o=r(e).query)!=null&&o.isBack?(m(),$(s,{key:0,type:"primary",onClick:r(Qe)},{default:P(()=>[q(" 返回 ")]),_:1},8,["onClick"])):B("",!0),a.topButtonList.length||(l=a.selectButtonList)!=null&&l.length?(m(),y("div",Os,[a.topButtonList.length?(m(),$(Rs,H(F({key:0},{xGrid:a.xGrid,gridConfig:a.gridConfig,topButtonList:a.topButtonList})),null,16)):B("",!0),(c=a.selectButtonList)!=null&&c.length?(m(),$(Ls,H(F({key:1},{xGrid:a.xGrid,gridConfig:a.gridConfig,selectButtonList:a.selectButtonList})),null,16)):B("",!0)])):B("",!0)])}}}),Hs=t=>(we("data-v-c11e2f2f"),t=t(),be(),t),zs=Hs(()=>b("div",null,null,-1)),Ns={class:"assets-container"},Ws={class:"item"},Xs=["src"],Qs=["src"],Zs=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){const e=t,a="",n=S(()=>{var o,l;return((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.resource)??[]}),s=S(()=>te(e.column,e.row));return(o,l)=>{const c=J,i=V("el-tooltip");return m(),y(O,null,[zs,b("div",Ns,[(m(!0),y(O,null,Q(r(n),(u,d)=>(m(),$(i,{key:d,show:u==null?void 0:u.isUpdate,trigger:"hover",placement:"top"},{content:P(()=>[q(L((u==null?void 0:u.title)??"错误"),1)]),default:P(()=>[b("div",Ws,[(u==null?void 0:u.type)==="url"&&r(wt)(u==null?void 0:u.icon)?(m(),y("img",{key:0,class:"logo",src:u==null?void 0:u.icon},null,8,Xs)):(u==null?void 0:u.type)==="path"?(m(),y("img",{key:1,class:"logo",src:`${r(a)}${u==null?void 0:u.icon}`},null,8,Qs)):(m(),$(c,{key:2,icon:u.icon},null,8,["icon"])),b("span",null,L(r(s)[u.field]??"字段错误"),1)])]),_:2},1032,["show"]))),128))])],64)}}});const Gs=R(Zs,[["__scopeId","data-v-c11e2f2f"]]),Js=I({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var s,o;const e=t,a=S(()=>te(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l,c)=>{const i=J;return m(),$(i,F({icon:r(a)},r(n)),null,16,["icon"])}}}),Ys={class:"xh-image-error"},Ks=I({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var s,o,l,c;const e=t,a=S(()=>te(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l=n.value)!=null&&l.style||(n.value.style={width:"30px",height:"30px"}),(c=n.value)!=null&&c.preview&&(n.value.previewSrcList=[a.value],delete n.value.preview),(i,u)=>{const d=J,f=V("el-image");return m(),$(f,F(r(n),{src:r(a),class:"xh-table-image"}),{error:P(()=>[b("div",Ys,[k(d,{icon:"Picture",type:"element"})])]),_:1},16,["src"])}}});const el=R(Ks,[["__scopeId","data-v-2e6bc660"]]),tl=t=>(we("data-v-257b233b"),t=t(),be(),t),al={class:"xh-image-error"},ol=tl(()=>b("span",null,"加载失败",-1)),nl=I({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var l,c,i;const e=t,a=S(()=>{var u;return((u=e.column.params)==null?void 0:u.previewDisabled)??!0}),n=S(()=>{const u=te(e.column,e.row);return u instanceof Array?u.map(d=>d.url):[]}),s=S(()=>{const u=te(e.column,e.row);return u instanceof Array&&u.length>0?u:[]}),o=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{});return(i=o.value)!=null&&i.style||(o.value.style={width:"30px",height:"30px"}),(u,d)=>{const f=J,v=V("el-image");return m(!0),y(O,null,Q(r(s),(_,p)=>(m(),$(v,F(r(o),{key:p,src:_==null?void 0:_.url,"preview-src-list":r(a)?[]:r(n)}),{error:P(()=>[b("div",al,[k(f,{icon:"Picture",type:"element"}),ol])]),_:2},1040,["src","preview-src-list"]))),128)}}});const sl=R(nl,[["__scopeId","data-v-257b233b"]]),ll=t=>(we("data-v-50a2462d"),t=t(),be(),t),cl={class:"xh-image-error"},rl=ll(()=>b("span",null,"加载失败",-1)),il=I({__name:"index",props:{column:{},row:{}},setup(t){var l,c,i;const e=t,a=S(()=>{var u;return((u=e.column.params)==null?void 0:u.previewDisabled)??!0}),n=S(()=>{const u=te(e.column,e.row);return u instanceof Array?u.map(d=>d.url):[]}),s=S(()=>{const u=te(e.column,e.row);return u instanceof Array&&u.length>0?u[0]:[]}),o=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{});return(i=o.value)!=null&&i.style||(o.value.style={width:"30px",height:"30px"}),(u,d)=>{var _;const f=J,v=V("el-image");return m(),$(v,F(r(o),{src:(_=r(s))==null?void 0:_.url,"preview-src-list":r(a)?[]:r(n)}),{error:P(()=>[b("div",cl,[k(f,{icon:"Picture",type:"element"}),rl])]),_:1},16,["src","preview-src-list"])}}});const ul=R(il,[["__scopeId","data-v-50a2462d"]]),dl=I({__name:"index",props:{isBorder:{type:Boolean,default:!1},border:{default:"1px solid #b179ff"}},setup(t){const e=t;Ce(n=>({"564a0163":r(a)}));const a=S(()=>e.isBorder?e.border:"");return(n,s)=>{const o=V("el-input");return m(),$(o,{class:pe({"xh-input":n.isBorder})},null,8,["class"])}}});const pl=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var l,c;const e=t,a=S(()=>te(e.column,e.row)),n=g(""),s=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{}),o=i=>{var _,p,h,x;const u=ge("rowEdit",!0),d=((_=e.column.params)==null?void 0:_.api)??u,f=((h=(p=e.gridConfig)==null?void 0:p.rowConfig)==null?void 0:h.keyField)??"id",v={[f]:e.row[f],keyField:f,field:(x=e.column)==null?void 0:x.field,value:i};Te(d,v,e.xGrid)};return(i,u)=>{const d=dl;return m(),$(d,F({modelValue:r(n),"onUpdate:modelValue":u[0]||(u[0]=f=>se(n)?n.value=f:null),value:r(a),placeholder:"请输入"},r(s),{"is-border":!0,onChange:o}),null,16,["modelValue","value"])}}}),ml=I({__name:"index",setup(t){return(e,a)=>{const n=V("el-input-number");return m(),$(n)}}}),_l=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var c,i;const e=t,a=S(()=>te(e.column,e.row)),n=S(()=>{var u;return((u=e.column.params)==null?void 0:u.isMessage)??!1}),s=g(a),o=g(((i=(c=e.column)==null?void 0:c.params)==null?void 0:i.props)??{}),l=u=>{var p,h,x,C;const d=ge("rowEdit",!0),f=((p=e.column.params)==null?void 0:p.api)??d,v=((x=(h=e.gridConfig)==null?void 0:h.rowConfig)==null?void 0:x.keyField)??"id",_={[v]:e.row[v],keyField:v,field:(C=e.column)==null?void 0:C.field,value:u};Te(f,_,e.xGrid,n.value)};return(u,d)=>{const f=ml;return m(),$(f,F({modelValue:r(s),"onUpdate:modelValue":d[0]||(d[0]=v=>se(s)?s.value=v:null),value:r(a)},r(o),{onChange:l}),null,16,["modelValue","value"])}}}),fl=I({__name:"index",props:{column:{},row:{}},setup(t){const e=t,a=S(()=>{var l;const o=((l=e.column)==null?void 0:l.params)??{};return o!=null&&o.type||delete o.type,o}),n=S(()=>{var o,l;return((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.format)??"￥"}),s=S(()=>te(e.column,e.row));return(o,l)=>(m(),y("div",H(W(r(a))),L(r(n))+L(r(It).commafy(r(It).toNumber(r(s)),{digits:2})),17))}}),aa=async t=>{const e=`${t}?t=${Date.now()}`;return await he(e)},hl=async(t,e,a)=>{for(let n=0;n<t.length;n++){const s=t[n],o=await aa(s),l=s.includes(".js");if(!e&&l)e=o.toString();else if(e&&l){const i=o.toString();e+=`
${i}`}const c=s.includes(".css")||s.includes(".scss");if(!a&&c)a=o.toString();else if(a&&c){const i=o.toString();a+=`
${i}`}}return{jsContent:e,cssContent:a}},ut=(t,e="el-icon-warning",a="font-size:26px;color:red;")=>({template:`
        <div class="remote-loading">
            <div class="${e}" style="${a}"></div>
            <div class="mt-5px">${t}</div>
        </div>
        `}),vl=t=>{const e=/<link[^>]*src="(.*?)"[^>]*>/g,a=Array.from(t.matchAll(e),d=>d[1]),n=Gr(),s=Ie(),o=a.map(d=>(d=`${n}${d}`,d.replace("{moduleName}",s))),l=t==null?void 0:t.match(/<template>([\s\S]*)<\/template>/),c=t==null?void 0:t.match(/<script.*>([\s\S]*)<\/script>/),i=t==null?void 0:t.match(/<style.*>([\s\S]*)<\/style>/);return{templates:l?l[1]:"",sctipts:c?c[1]:"",styles:i?i[1]:"",stylesHasScoped:t.match(/<style.*scoped>([\s\S]*)<\/style>/)!==null,links:o}},oa={vue:null},gl=(t,e,a)=>re.alert(t,{confirmButtonText:"确定",type:e,...a}),yl=(t,e,a)=>{Fa({message:t,type:e,...a})},xl=(t,e,a)=>re({customStyle:{width:"45%",height:"500px"},showClose:!0,title:" ",...a,closeOnClickModal:!1,customClass:"xh-modal-mask",message:()=>Ze(Ke,{file:t,ajaxParams:e,"onUpdate:close":()=>{re.close()}})}),kl=async t=>{const e=vl(t);if(!e.sctipts||!e.templates)return Promise.resolve({ponentObj:ut("远程代码格式解析失败"),tplData:e});let a={jsContent:"",cssContent:""};e.links.length>0&&(a=await hl(e.links,a.jsContent,a.cssContent)),a.cssContent&&(e.styles=a.cssContent+e.styles);const n=e.sctipts.indexOf("{"),s=e.sctipts.lastIndexOf("}");if(n===-1||s===-1)return Promise.resolve({ponentObj:ut("解析代码错误"),tplData:e});const o=e.sctipts.slice(n,s+1),l=`${a.jsContent}
return ${o}`,c=new Function(l)();return c.template=e==null?void 0:e.templates,Promise.resolve({ponentObj:c,tplData:e})},wl=()=>{const t=oa.vue,e=fe(),a=G(),n=Ie();t.config.globalProperties.$moduleName=n,t.config.globalProperties.$userApp=e,t.config.globalProperties.$siteApp=a,t.config.globalProperties.$axios=jn,t.config.globalProperties.$http={useGet:he,usePost:xe,usePut:Ne,useDelete:We},t.config.globalProperties.$useGet=he,t.config.globalProperties.$usePost=xe,t.config.globalProperties.$usePut=Ne,t.config.globalProperties.$useDelete=We,t.config.globalProperties.$echarts=Oa,t.config.globalProperties.$useKeyCodeEvent=Zr,t.component("XRemote")===void 0&&t.component("XRemote",ce),t.component("AppIcons")===void 0&&t.component("AppIcons",J),t.config.globalProperties.$useAlert=gl,t.config.globalProperties.$useConfirm=ve,t.config.globalProperties.$useMessage=yl,t.config.globalProperties.$useNotify=Ee,t.config.globalProperties.$useLoading=Ye,t.config.globalProperties.$useRemote=xl},bl=(t,e)=>{qa.render(t).then(a=>{const n=document.createElement("style");if(n.setAttribute("type","text/css"),n.setAttribute("id",`css${e}`),n.styleSheet)n.styleSheet.cssText=a.css;else{const o=document.createTextNode(a.css);n.appendChild(o)}const s=document.getElementsByTagName("head");s.length?s[0].appendChild(n):document.documentElement.appendChild(n)})},Cl=(t,e,a)=>{if(t.setAttribute("class",`remote css${e}`),!document.querySelector(`style[id=css${e}]`)){let n="";a.stylesHasScoped?n=`
            .css${e}{
                ${a.styles}
            }
        `:n=a.styles,bl(n,e)}},Pl=I({__name:"index",props:{file:{},ajaxParams:{},isApi:{type:Boolean},isModal:{type:Boolean}},emits:["update:init","update:modelValue","update:success","update:error","update:close"],setup(t,{emit:e}){const a=t,n=Ha(),s=g(),o=g(st()),l=g(a.isApi),c=g(a.file),i=async p=>await aa(p).then(async h=>{const x=h.toString(),C=await kl(x);return Cl(s.value,o.value,C.tplData),C.ponentObj}).catch(h=>{e("update:error",h),console.error("解析组件内容出错",h)}),u=za(async()=>c.value?await i(`${c.value}.vue`).then(p=>(wl(),e("update:init",p),p)):ut("请先配置远程文件")),d=p=>{e("update:modelValue",p)},f=p=>{l.value=!1,c.value=p,o.value=st(),i(c.value)},v=()=>{o.value=st(),i(c.value)},_=()=>{a!=null&&a.isModal&&e("update:close")};return(p,h)=>(m(),y("div",{ref_key:"remoteRef",ref:s,class:"h-100%"},[(m(),$(Ot(r(u)),F({...r(n),...p.ajaxParams},{"onUpdate:modelValue":d,"onUpdate:openWin":f,"onUpdate:reloadWin":v,"onUpdate:closeWin":_}),null,16))],512))}});const ce=R(Pl,[["__scopeId","data-v-9c0d9a0b"]]),$l=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var l;const e=t,a=S(()=>{var c,i;return(i=(c=e.column)==null?void 0:c.params)==null?void 0:i.file}),n=((l=e.column)==null?void 0:l.field)??"",s=S(()=>te(e.column,e.row)),o=c=>{var v,_,p,h;const i=ge("rowEdit",!0),u=((v=e.column.params)==null?void 0:v.api)??i,d=((p=(_=e.gridConfig)==null?void 0:_.rowConfig)==null?void 0:p.keyField)??"id",f={[d]:e.row[d],keyField:d,field:(h=e.column)==null?void 0:h.field,value:c};Te(u,f,e.xGrid)};return(c,i)=>{const u=ce;return m(),$(u,F({modelValue:r(s),"onUpdate:modelValue":i[0]||(i[0]=d=>se(s)?s.value=d:null),file:r(a)},{column:c.column,field:r(n),row:c.row},{"onUpdate:value":o}),null,16,["modelValue","file"])}}}),Il={key:0,class:"tabs-container"},Dl={class:"tabs-list"},Al=["onClick"],jl={class:"pl-1"},Sl=I({__name:"index",props:{xGrid:{},gridConfig:{},tabsConfig:{}},setup(t){var u;const e=t,a=g();S(()=>a.value.wrapRef);const n=ue(),s=Qt(),o=((u=e.tabsConfig)==null?void 0:u.field)??"",l=n==null?void 0:n.query[o],c=S(()=>{var d;return l??((d=e.tabsConfig)==null?void 0:d.active)}),i=d=>{s.push({query:{[o]:d.value}})};return(d,f)=>{var p,h;const v=J,_=V("el-space");return(h=(p=d.tabsConfig)==null?void 0:p.list)!=null&&h.length?(m(),y("div",Il,[b("div",Dl,[k(_,null,{default:P(()=>[(m(!0),y(O,null,Q(d.tabsConfig.list,(x,C)=>(m(),y("div",{key:C,class:pe(["item",{active:r(c)===(x==null?void 0:x.value)}]),onClick:j=>i(x)},[x!=null&&x.icon?(m(),$(v,{key:0,icon:x==null?void 0:x.icon},null,8,["icon"])):B("",!0),b("span",jl,L((x==null?void 0:x.label)??"错误"),1)],10,Al))),128))]),_:1})])])):B("",!0)}}});const Tl=R(Sl,[["__scopeId","data-v-e05c271e"]]),Vl=I({__name:"index",props:{xGrid:{},gridConfig:{},formScreen:{}},setup(t){const e=Qt(),a=ue(),n=s=>{e.push({path:a.fullPath,query:{...a.query,...s.data}})};return(s,o)=>{var c;const l=V("vxeForm");return m(),$(l,{items:s.formScreen.items,data:(c=s.formScreen)==null?void 0:c.data,onSubmit:n},null,8,["items","data"])}}}),El=I({__name:"index",props:{gridConfig:{},xGrid:{},formRemote:{}},setup(t){return(e,a)=>{var s,o;const n=ce;return m(),$(n,F({file:((s=e.formRemote)==null?void 0:s.file)||""},{ajaxParams:(o=e.formRemote)==null?void 0:o.ajaxParams}),null,16,["file"])}}}),Bl={class:"form-tabs-container"},Ml=I({__name:"index",props:{xGrid:{},gridConfig:{},formScreen:{},formRemote:{},tabsConfig:{}},setup(t){return(e,a)=>{var l,c,i,u;const n=El,s=Vl,o=Tl;return m(),y("div",Bl,[(l=e.formRemote)!=null&&l.file?(m(),$(n,H(F({key:0},{gridConfig:e.gridConfig,formRemote:e.formRemote,xGrid:e.xGrid})),null,16)):B("",!0),(c=e.formScreen)!=null&&c.data?(m(),$(s,H(F({key:1},{gridConfig:e.gridConfig,formScreen:e.formScreen,xGrid:e.xGrid})),null,16)):B("",!0),(u=(i=e.tabsConfig)==null?void 0:i.list)!=null&&u.length?(m(),$(o,H(F({key:2},{gridConfig:e.gridConfig,tabsConfig:e.tabsConfig,xGrid:e.xGrid})),null,16)):B("",!0)])}}});const Rl=R(Ml,[["__scopeId","data-v-4bb9ed66"]]),Ul=["innerHTML"],Ll=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var s,o;const e=t,a=S(()=>te(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l,c)=>(m(),y("div",F(r(n),{innerHTML:r(a)}),null,16,Ul))}}),Fl=I({__name:"index",props:{options:{},value:{default:""}},setup(t){const e=t,a=S(()=>e.value);return(n,s)=>{const o=V("el-option"),l=V("el-select");return m(),$(l,{modelValue:r(a),"onUpdate:modelValue":s[0]||(s[0]=c=>se(a)?a.value=c:null),placeholder:"请选择"},{default:P(()=>[(m(!0),y(O,null,Q(n.options,c=>(m(),$(o,{key:c.value,label:c.label,value:c.value,disabled:c.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])}}}),Ol=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var o;const e=t,a=S(()=>te(e.column,e.row)),n=g(((o=e.column)==null?void 0:o.params)??{}),s=l=>{var f,v,_,p;const c=ge("rowEdit",!0),i=((f=e.column.params)==null?void 0:f.api)??c,u=((_=(v=e.gridConfig)==null?void 0:v.rowConfig)==null?void 0:_.keyField)??"id",d={[u]:e.row[u],keyField:u,field:(p=e.column)==null?void 0:p.field,value:l};Te(i,d,e.xGrid)};return(l,c)=>{var u,d;const i=Fl;return(d=(u=r(n))==null?void 0:u.options)!=null&&d.length?(m(),$(i,F({key:0,value:r(a)},r(n),{onChange:s}),null,16,["value"])):B("",!0)}}}),ql=I({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){const e=t,a=S(()=>te(e.column,e.row)),n=s=>{var u,d,f,v;const o=ge("rowEdit",!0),l=((u=e.column.params)==null?void 0:u.api)??o,c=((f=(d=e.gridConfig)==null?void 0:d.rowConfig)==null?void 0:f.keyField)??"id",i={[c]:e.row[c],keyField:c,field:(v=e.column)==null?void 0:v.field,value:s};Te(l,i,e.xGrid)};return(s,o)=>{var c,i,u,d,f,v,_,p,h,x,C,j,E,M,w,A,T,z,K,oe,Ae,Le,Fe,Oe;const l=V("el-switch");return m(),$(l,{modelValue:r(a),"onUpdate:modelValue":o[0]||(o[0]=tt=>se(a)?a.value=tt:null),"active-action-icon":((u=(i=(c=s.column)==null?void 0:c.params)==null?void 0:i.checked)==null?void 0:u.icon)??"","active-color":((v=(f=(d=s.column)==null?void 0:d.params)==null?void 0:f.checked)==null?void 0:v.color)??"#13ce66","active-text":(h=(p=(_=s.column)==null?void 0:_.params)==null?void 0:p.checked)==null?void 0:h.text,"active-value":(j=(C=(x=s.column)==null?void 0:x.params)==null?void 0:C.checked)==null?void 0:j.value,"inactive-action-icon":((w=(M=(E=s.column)==null?void 0:E.params)==null?void 0:M.unchecked)==null?void 0:w.icon)??"","inactive-color":((z=(T=(A=s.column)==null?void 0:A.params)==null?void 0:T.unchecked)==null?void 0:z.color)??"#ff4949","inactive-text":(Ae=(oe=(K=s.column)==null?void 0:K.params)==null?void 0:oe.unchecked)==null?void 0:Ae.text,"inactive-value":(Oe=(Fe=(Le=s.column)==null?void 0:Le.params)==null?void 0:Fe.unchecked)==null?void 0:Oe.value,"inline-prompt":"",onChange:n},null,8,["modelValue","active-action-icon","active-color","active-text","active-value","inactive-action-icon","inactive-color","inactive-text","inactive-value"])}}}),Hl=I({__name:"index",props:{column:{},row:{}},setup(t){const e=t,a=S(()=>te(e.column,e.row)),n=S(()=>{var o;return(o=e.column.params)!=null&&o.options?e.column.params.options[a.value]||"标签错误":"选项错误"}),s=S(()=>{var c;const o=g({style:{},...e.column.params??{}});(c=o.value)!=null&&c.type&&delete o.value.type;const l=S(()=>{var i,u;if((i=e.column.params)!=null&&i.style)return((u=e.column.params)==null?void 0:u.style[a.value])||void 0});return o.value.style=l.value,o.value});return(o,l)=>{const c=V("el-tag");return m(),$(c,H(W(r(s).style)),{default:P(()=>[q(L(r(n)),1)]),_:1},16)}}}),zl={class:"flex"},Nl=["href","target"],Wl=I({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var o,l;const e=t,a=S(()=>te(e.column,e.row)),n=g(((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.props)??{}),s=()=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(a.value).then(c=>{});else{const c=document.createElement("input");c.value=a.value,document.body.appendChild(c),c.select(),document.execCommand("Copy"),c.remove()}Y("链接复制成功")};return(c,i)=>{var f;const u=J,d=V("el-button");return m(),y("div",zl,[b("a",{href:r(a),target:r(n).target??"_blank"},L(r(n).text?r(n).text:r(a)),9,Nl),(f=r(n))!=null&&f.copy?(m(),$(d,{key:0,type:"primary",size:"small",text:"",onClick:s},{icon:P(()=>[k(u,{icon:"CopyDocument",size:14})]),default:P(()=>[q(" 复制 ")]),_:1})):B("",!0)])}}}),Xl={class:"xb-pictuer"},Ql={key:0,class:"info"},Zl=["innerHTML"],Gl=["innerHTML"],Jl=I({__name:"index",props:{column:{},row:{}},setup(t){const e=t,a=S(()=>{var u,d;return((d=(u=e.column)==null?void 0:u.params)==null?void 0:d.props)??{}}),n=S(()=>{var u,d;return((d=(u=e.column)==null?void 0:u.params)==null?void 0:d.image)??"avatar"}),s=S(()=>{var u,d;return((d=(u=e.column)==null?void 0:u.params)==null?void 0:d.title)??"title"}),o=S(()=>{var u,d;return((d=(u=e.column)==null?void 0:u.params)==null?void 0:d.desc)??"desc"}),l=S(()=>e.row[n.value]),c=S(()=>e.row[s.value]),i=S(()=>e.row[o.value]);return(u,d)=>{const f=V("el-image");return m(),y("div",Xl,[k(f,F({class:"pictuer",src:r(l),"preview-src-list":[r(l)]},r(a)),null,16,["src","preview-src-list"]),r(c)||r(i)?(m(),y("div",Ql,[r(c)?(m(),y("div",{key:0,class:"title",innerHTML:r(c)},null,8,Zl)):B("",!0),r(i)?(m(),y("div",{key:1,class:"desc",innerHTML:r(i)},null,8,Gl)):B("",!0)])):B("",!0)])}}});const Yl=R(Jl,[["__scopeId","data-v-553e0bc9"]]),Kl=(t,e,a,n)=>{if(e.length<=0){D("请先导入数据");return}if(!t){D("请设置导入API接口");return}xe(t,{import:a,data:e}).then(o=>{var l;(l=n.xGrid)==null||l.commitProxy("query"),Y((o==null?void 0:o.msg)??"操作成功")})},ec=t=>{je.commands.add("importAllData",{commandMethod:e=>{var o;const{$table:a}=e,n=a==null?void 0:a.getTableData(),s=n==null?void 0:n.fullData;Kl(((o=t.vxeTableConfig.importConfig)==null?void 0:o.api)??"",s,"all",t)}})},na=I({__name:"index",props:{api:{},method:{default:"GET"},ajaxParams:{default:void 0}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{emit:e}){const a=t,n=g(),s=g(),o=g(),l=g(),c=g([]),i=g([]),u=g([]),d=async()=>{const v=g({method:a.method,params:{},data:{}});a.ajaxParams&&(a.method==="GET"?v.value.params=a.ajaxParams:v.value.data=a.ajaxParams),e("update:init",v.value);const _=`${a.api}Table`;return await Z(_,v.value).then(p=>{const h=p.data;o.value=h==null?void 0:h.realTable,l.value=h==null?void 0:h.tabsConfig,s.value=ns(a.api,a.method,h.tableConfig,a.ajaxParams,n.value),c.value=h.topButtonList,i.value=h.rightButtonList,u.value=h.selectButtonList,ec({xGrid:n.value,vxeTableConfig:s.value}),e("update:init-ok",h)}).catch(p=>{e("update:init-error",p)})},f=()=>{var v,_,p;if((v=o.value)!=null&&v.enable&&((_=o.value)!=null&&_.time_interval)){const h=((p=o.value)==null?void 0:p.time_interval)*1e3;setInterval(()=>{var x;(x=n.value)==null||x.commitProxy("reload")},h)}};return ie(async()=>{await d(),await f()}),(v,_)=>{var x,C,j,E,M;const p=Jn,h=V("vxe-grid");return(x=r(s))!=null&&x.id?(m(),$(h,F({key:0,ref_key:"xGrid",ref:n,class:"xh-table"},r(s),{onEditClosed:_[0]||(_[0]=({column:w,row:A})=>r(Qn)(w,A,r(s),r(n)))}),Ge({topButtonList:P(({$grid:w})=>[k(r(qs),H(W({gridConfig:r(s),topButtonList:r(c),selectButtonList:r(u),xGrid:w})),null,16)]),rightButtonList:P(({row:w,column:A,$grid:T})=>[k(r(Bs),H(W({gridConfig:r(s),rightButtonList:r(i),row:w,column:A,xGrid:T})),null,16)]),pictuer:P(({row:w,column:A,$grid:T})=>[k(r(Yl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),unit:P(({row:w,column:A,$grid:T})=>[k(p,H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),html:P(({row:w,column:A,$grid:T})=>[k(r(Ll),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),remote:P(({row:w,column:A,$grid:T})=>[k(r($l),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),tags:P(({row:w,column:A,$grid:T})=>[k(r(Hl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),link:P(({row:w,column:A,$grid:T})=>[k(r(Wl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),input:P(({row:w,column:A,$grid:T})=>[k(r(pl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),InputNumber:P(({row:w,column:A,$grid:T})=>[k(r(_l),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),assets:P(({row:w,column:A,$grid:T})=>[k(r(Gs),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),money:P(({row:w,column:A,$grid:T})=>[k(r(fl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),image:P(({row:w,column:A,$grid:T})=>[k(r(el),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),images:P(({row:w,column:A,$grid:T})=>[k(r(sl),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),photos:P(({row:w,column:A,$grid:T})=>[k(r(ul),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),icons:P(({row:w,column:A,$grid:T})=>[k(r(Js),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),switch:P(({row:w,column:A,$grid:T})=>[k(r(ql),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),select:P(({row:w,column:A,$grid:T})=>[k(r(Ol),H(W({gridConfig:r(s),row:w,column:A,xGrid:T})),null,16)]),_:2},[(j=(C=r(s))==null?void 0:C.screenRemote)!=null&&j.file||(M=(E=r(l))==null?void 0:E.list)!=null&&M.length?{name:"form",fn:P(({$grid:w})=>{var A,T,z;return[k(r(Rl),H(W({gridConfig:r(s),xGrid:w,formScreen:{...(A=r(s))==null?void 0:A.formConfig,screenConfig:(T=r(s))==null?void 0:T.screenConfig},formRemote:(z=r(s))==null?void 0:z.screenRemote,tabsConfig:r(l)})),null,16)]}),key:"0"}:void 0]),1040)):B("",!0)}}}),tc={class:"xhadmin-table-pro"},ac=I({__name:"table-modal",props:{api:{},method:{},ajaxParams:{}},setup(t){return(e,a)=>(m(),y("div",tc,[k(r(na),{api:e.api,method:e.method,"ajax-params":e.ajaxParams,"is-modal":!0},null,8,["api","method","ajax-params"])]))}});const kt=R(ac,[["__scopeId","data-v-62ed6f04"]]),oc={class:"xh-modal-container"},nc=I({__name:"remote-modal",props:{file:{},ajaxParams:{}},emits:["update:close"],setup(t,{emit:e}){const a=()=>{e("update:close")};return(n,s)=>(m(),y("div",oc,[k(r(ce),{file:n.file,"ajax-params":n.ajaxParams,"is-modal":!0,"onUpdate:close":a},null,8,["file","ajax-params"])]))}});const Ke=R(nc,[["__scopeId","data-v-523e3818"]]),sc={class:"xhadmin-table-pro"},lc=I({name:"/table"}),cc=I({...lc,setup(t){const e=ue(),a=ge(),n=e.meta.method,s=e.query??{};return(o,l)=>(m(),y("div",sc,[k(r(na),{api:r(a),method:r(n),"ajax-params":r(s)},null,8,["api","method","ajax-params"])]))}});const rc=R(cc,[["__scopeId","data-v-a39226b1"]]),ic=t=>(we("data-v-7ca0a0aa"),t=t(),be(),t),uc={class:"xhadmin-page-pro"},dc={key:0,class:"flex items-center bg-white px-5 py-4 mb-[10px]"},pc=ic(()=>b("span",{class:"pl-1 text-[16px]"},"返回",-1)),mc={key:0,class:"pl-20px text-[16px] select-none"},_c={class:"form-pro flex-1"},fc=I({name:"/form"}),hc=I({...fc,setup(t){const e=ue(),a=g(),n=g(),s=ge(),o=e.meta.method,l={...e.query};l!=null&&l.isBack&&(l==null||delete l.isBack);const c=g({...l}),i=g({submitBtn:{},resetBtn:{}}),u=p=>{var x;const h=(x=p==null?void 0:p.response)==null?void 0:x.extraConfig;i.value=h},d=()=>{a.value.submit()},f=()=>{a.value.reset(),Y("数据重置完成")},v=()=>{n.value.setDisabled(!0)},_=()=>{n.value.setDisabled(!1)};return(p,h)=>{var C,j,E;const x=J;return m(),y("div",uc,[(C=r(e).query)!=null&&C.isBack?(m(),y("div",dc,[b("div",{class:"flex items-center cursor-pointer select-none",onClick:h[0]||(h[0]=(...M)=>r(Qe)&&r(Qe)(...M))},[k(x,{icon:"ArrowLeftOutlined",size:16}),pc]),(j=r(e).meta)!=null&&j.title?(m(),y("div",mc,L((E=r(e).meta)==null?void 0:E.title),1)):B("",!0)])):B("",!0),b("div",_c,[k(r(ht),{ref_key:"formRef",ref:a,class:"xh-form-create",api:r(s),method:r(o),"ajax-params":r(c),"onUpdate:initOk":u,"onUpdate:submit":v,"onUpdate:submitOk":_,"onUpdate:submitError":_,"onUpdate:restOk":_,"onUpdate:initError":_},null,8,["api","method","ajax-params"])]),k(r(Xn),{ref_key:"buttonRef",ref:n,class:"xh-buttons-pro","extra-config":r(i),"onUpdate:submit":d,"onUpdate:rest":f},null,8,["extra-config"])])}}});const vc=R(hc,[["__scopeId","data-v-7ca0a0aa"]]),gc={class:"h-100%"},yc=I({name:"remote"}),xc=I({...yc,setup(t){const a=ue().meta.ajaxParams;return(n,s)=>(m(),y("div",gc,[k(r(ce),{file:r(a)},null,8,["file"])]))}}),kc={};function wc(t,e){return m(),y("div",null," Html内容文件 ")}const bc=R(kc,[["render",wc]]),Cc={class:"h-100%"},Pc=I({name:"remote"}),$c=I({...Pc,setup(t){const e=ge();return(a,n)=>(m(),y("div",Cc,[k(r(ce),{file:r(e),"is-api":!0},null,8,["file"])]))}}),Ic=Object.freeze(Object.defineProperty({__proto__:null,formIndex:vc,htmlIndex:bc,remoteIndex:xc,tableIndex:rc,vueIndex:$c},Symbol.toStringTag,{value:"Module"})),ot={routeView:()=>ye(()=>import("./index.9aa74fb5.js"),["assets/js/index.9aa74fb5.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"]),exceptionView:()=>ye(()=>import("./exception.b9b34eed.js"),["assets/js/exception.b9b34eed.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"])},Dc=t=>{if(!t)return ot.blankView;if(t in ot)return ot[t];const e=Qr(t??"");return Ic[e]},Ac=t=>{for(const e of t){const a=e.remote,n=a.replace("/","_"),s=()=>Ze(ce,{file:a});s.displayName=n;const o={path:e==null?void 0:e.path,name:n,component:s,meta:{title:(e==null?void 0:e.title)||"未知页面",path:(e==null?void 0:e.path)||"未知路径",pid:0,method:"GET",ajaxParams:{}}};X.addRoute(o)}},jc=t=>{const e=[];for(const a of t)if(a.path){const n={path:`/${a.path}`,name:a.path.replace("/","_"),component:zt(Dc(a.component)),meta:{title:a.title,path:a.path,pid:a.pid,icon:a.icon,method:a.method,ajaxParams:a.auth_params},children:[]};(!n.children||n.children.length<1)&&delete n.children,e.push(n)}return e},sa=new Map,la=(t,e,a)=>{var o;const n=[];let s=[];e?s=t.filter(l=>(l==null?void 0:l.pid)===e):s=t.filter(l=>!l.pid);for(const l of s){const c=a?`${a}-${l.id}`:`${l.id}`;let i=`/${l.path}`;if(l!=null&&l.auth_params&&(l!=null&&l.auth_params.includes("group"))){const f=et(`?${l==null?void 0:l.auth_params}`);i+=`_group=${f==null?void 0:f.group}`}else l!=null&&l.auth_params&&(i+=`_${l==null?void 0:l.auth_params}`);sa.set(i,c);const u={activeId:c,title:l.title,icon:l.icon,ajaxParams:l.auth_params,path:l.path,show:l.show==="1",target:l.target??"_blank",isGroup:!1,children:la(t,l.id,c)},d=(o=u.children)==null?void 0:o.some(f=>f.show);u.show&&d&&(u.isGroup=!0),n.push(u)}return n},Et=sa,Sc=g("OS");matchMedia("(prefers-color-scheme: dark)");function Tc(){return{theme:Sc}}const fe=Zt("user",()=>{const t=Re(),e=g({...At}),a=g([]),n=g([]),s=g({...at}),o=p=>{if(!(p!=null&&p.menus)){D("用户信息缺少Menus字段参数");return}p.menus instanceof Array&&p.menus.length>0&&(a.value=jc(p.menus),n.value=la(p.menus)),p!=null&&p.theme&&(s.value={...s.value,...p.theme}),e.value=p};return{layoutInfo:s,userInfo:e,Authorization:t,login:async(p,h=!0,x=!0)=>{var w,A,T,z,K;const j=(A=(w=G().siteInfo)==null?void 0:w.public_api)==null?void 0:A.login;if(!j){D("请配置登录接口");return}const E=await xe(j,p);if(!((T=E==null?void 0:E.data)!=null&&T.token)){D("登录错误，没有获取到令牌","温馨提示");return}let M=E==null?void 0:E.data.token;if(M.includes("Bearer")||(M=`Bearer ${M}`),t.value=M,h&&Y((E==null?void 0:E.msg)??"登录成功","温馨提示"),x){const Ae=((z=X.currentRoute.value.query)==null?void 0:z.redirect)??E.data.url;X.push(Ae)}return(K=E==null?void 0:E.data)==null?void 0:K.token},loginOut:()=>{ve("是否确认退出登录？","温馨提示","error").then(()=>{t.value="",o({...At}),X.push(ze)})},getUserInfo:async()=>{var C;const h=(C=G().siteInfo.public_api)==null?void 0:C.user;if(!h){D("请配置用户信息接口");return}const{data:x}=await he(h);x&&o(x)},routeList:a,menuList:n,setTheme:p=>{s.value.theme=p,Tc().theme.value=p},setLayout:p=>{s.value.layout=p},setLayoutMenu:p=>{s.value.layoutMenu=p},hanldCollapse:p=>{let h=0;p?h=at.sideWidth:h=s.value.sideMenuWidth,s.value.sideMenuCollapse=p,s.value.sideWidth=h},setLayoutMenuCollapse:()=>{let p=0,h=!1;s.value.sideMenuCollapse?(p=at.sideWidth,h=!1):(p=s.value.sideMenuWidth,h=!0),s.value.sideMenuCollapse=h,s.value.sideWidth=p}}}),Vc={class:"xhadmin-menus-pro"},Ec=["onClick"],Bc={class:"text"},Mc={key:0,class:"mask"},Rc=I({__name:"menu",props:{active:{},menus:{},sideMenuWidth:{default:60},sideWidth:{default:200}},setup(t){const e=t;Ce(_=>({"0798f8a6":r(c),"92a4eeb6":r(l)}));const a=$e(),n=Me(fe()).layoutInfo,s=S(()=>{var _;return((_=n.value)==null?void 0:_.layoutMenu)||"group"}),o=S(()=>{var _;return((_=n.value)==null?void 0:_.layoutTabsTheme)||"radius"}),l=S(()=>`${e.sideMenuWidth}px`),c=S(()=>`${e.sideWidth}px`),i=g(""),u=g(""),d=_=>{i.value=_;const p=i.value.split("-");u.value=p[0]},f=_=>{var x;const p=_[0],h=(x=p==null?void 0:p.children)==null?void 0:x.find(C=>C.show===!0);return p!=null&&p.children&&h?f((p==null?void 0:p.children)??[]):p},v=_=>{var M;const p=(M=_==null?void 0:_.children)==null?void 0:M.find(w=>w.show===!0);let h=_;_!=null&&_.children&&p&&(h=f((_==null?void 0:_.children)??[]));const x=h.path,C=g({});h.ajaxParams&&(C.value=et(h.ajaxParams));const j=h.activeId;d(j);let E={...C.value};a.value&&(E={...E,appid:a.value}),le(`/${x}`,E)};return ie(()=>{d(e.active)}),(_,p)=>{const h=J,x=V("el-menu");return m(),y("div",Vc,[(m(!0),y(O,null,Q(_.menus,C=>(m(),y("div",{key:C.id,class:"item"},[C.show?(m(),y("div",{key:0,class:pe({"item-triangle":r(o)==="triangle","item-radius":r(o)==="radius",active:r(u)===C.activeId}),onClick:j=>v(C)},[k(h,{icon:C.icon,size:"22",type:(C==null?void 0:C.iconType)||""},null,8,["icon","type"]),b("div",Bc,L(C.title),1),r(o)==="triangle"?(m(),y("div",Mc)):B("",!0)],10,Ec)):B("",!0),b("div",{class:pe(["item-children",{active:r(u)===C.activeId}])},[k(x,{"default-active":_.active,"unique-opened":r(s)==="level"},{default:P(()=>[(m(!0),y(O,null,Q(C.children,j=>(m(),y(O,{key:j.activeId},[r(s)==="level"?(m(),$($o,{key:0,"menu-data":j},null,8,["menu-data"])):(m(),$(Je,{key:1,"menu-data":j},null,8,["menu-data"]))],64))),128))]),_:2},1032,["default-active","unique-opened"])],2)]))),128))])}}});const Uc=R(Rc,[["__scopeId","data-v-cd9ea0ea"]]),Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAADPCAMAAACKnR5TAAABMlBMVEVHcEx7pvgH+9srxdIsw9ItxdAD/9zLdv0bj/wajv4o3Nsajv6oS/13UvscZfDUdv1Yi/eeSvwg19UbfvkH+tsswdMcYe+CUPttd/sjp+kcavKrWf0E/ttfZ/ootd3Bbv0U6NguxNS0Zf2iTfwfnPIbfvkvwNCKfv4txs4Zjf8da/Md/uIbY/EaY/AH/9x6Y/wY/+CHbv0obPMqbfIcZfEeZfPEeP0O/92ahf6nf/6TTPyOTfsF/92ze/4E/90K/+GGTvucSfyre/6YgP5+UPvCev4eY/Cagf/D6vu2ef6T5fNDffJwXfpBjfmKfvg5Y/Qj09U6vNgtw9Aajf6uR/wE/9sdY+/advzddv2yRv2vRvwC/9sZi/8WZO+pRvwSjv6gSfuQf/11UvdBiP46XfI7XfL04pvpAAAAUnRSTlMABt7b7fX5/e32Ftz8b/L+DuHc1+zM+pgZ0ev58yXb+txi+Pfg5Poz+/vYMJbjx0J7UjlzuFXrrWOj1MJfyZZLre64fYbayo4j2USm7tvE8qtylTSQZQAAColJREFUeNrtnAtf2kgUxQ0QHhUhKGJAAVdUxFoRWt+1lWpb+9pHAUFhWffR7/8VdgKIREgy50qG7G9z/QLe39w5+c85M8zMuOWWW2655ZZbbrn1fyopXZyDq6hKDm1HKc5dLoF1OZdXHNpO+vIkhtbJzxdpZ3ajlk7vajc3t9x1c1MLL6+9KylOHDe1uBRj3UBVW84G3l84ctzSc6c59g9y1+1th61NtHHw7kh1YDvF80rt5hZpJ5xbzjaa0YPjvANFeu6kw/YD1M7yWqDZbAbOjhwn1urceeUWGDVWnfBaNsraaR4cO27c8kuxMLY2bOdko41Ggy3Pp48OGzeldBrGRq0Wzq0FGk2tnUaAibWjdk7xMgaPGhNp1oq2Po33H4tO2j2MBzCR7nXT6JWmBk5iA6V4nuvcoiLdXxutnWjWQeMm5bsiXcNFunG/PtFPzmED5ei8cgPtnE5fpAfT1nQQG1wdV+5AvMn1RHqwOs5hA0k9OruDd87wqHXFzSlsoJaOYx1k42jfnOFR6/dzcFxS/4si3eWBwPCsOYkNNJHG2umR9ON2HMEGOElrX9BHO6dxzwb5ae8e7dB2i/EAE+lAdEw7TmCD/HkFVLXOmFHrrc702UCdO4UPbblxo+YINlCKSzHaoW1cN1NnA4JI3+l5oOEgNmCHtrsnkPTo7pkqGyjs0AbygEbSUaN2pswGTAcquLMWMJq1abNBfqnSwZ01k276bDCVaWMkfdKpTUqkh9jgYipsoJbOKzVo59RqhiI9fTZIL52Eb28ozpr56jA2mIKtI5VOc4RRazQbVqWxgeh+pPzlCRs1pB0Dkh7DBsdHz5wefzCSXuZaHI0NPl6Jtj0pJM3TjUaijA2eiRw3evzR4OlHNBsopfPYk5w1i3ETzAbppVh4ciQ9hg2yItmgm1FPmgdG2EDUQa6bUcMkzTtqwtlAvaRk1AHeWeuzgbCDnCbSBJJuIu00omdFp4p0jV+khw4KYtrBM2pEpAdk8EnQsNEzaqQdUeG8llHbKtI9qhZkgTwto+YeNVEGFc1ZC6CjdnYhZtTwjLpj4qwZMsHHoggm6GXUsLOGjlrgTMyVPRXNqLs8gIq0MJ7Owxm1lbM2XqSF5CKSenT65Iya4zB6dpQWMmolRtK1STtrY0RajDGliTTurKEiLexo0BXpJ2fUHAc3EYujdEkaO7blKCQt5lg9uYzaESJdnFhG7QRLipJRLzuWpPGMutPJUUTaySQN84CYIF6acEY9ZXeNllHDoybqztTkM2oDkRbDA/mlSth+kn5/LObQRsmolykkLeaTA2fUJGftQJizBmfU+KgxWDsSsnMkWvzhUJKW8pcxWzJq/ahlBXnShCd6d1pG7UyRtjOjHupHEEnbm1EPQFrUtTx7M+rBqB0IjD8EOGvvRH1Bbc6oBxeOhThrtmfUYkmaklFncZIW5qzR3lGDJC3mmaWIjLpndwg6tGEZNc1ZE0bSTAc60K9D9J01rESJdP8dNVJ9kQbu3mgknRaXUYPt9J/s81dDmLPGSPoOq1xuLRvA6uDsIq8oz6Ai5ablL1//Auvr1z/h+vnLbz+B9Zxwj1fd//DPjx8//gHql+1vf4P17VvGuwjWr3t4P1J558XvUCUiqYXZ0B9QBZNJ3/fvW+yPv7ZWD/eeo+N29fJDAmsn8mJhI1RA21n0fYdqU5bj8d098J619PlL6vdrqCLbC8HqH1WgCsH1jFfG2pG98/FW/PCzhOHNyw/XaDts1KpQBdeTGXkLbGd+daXV2sXGTd1/9QJrJhHZ2AhC7bTbs/io+eZX4yt1tjyvETVgOpDARy1UgEYthI+azzvv8dfrdb/nzXNoccBuEqkFtnOgCs0mM74ttJ3VeKtVr7fqu6+5XykobHHQUUuBo1Zta6q2BbWzuelb9axo7dTr8TdveceN6UAEbOfFBjpqhXV458i+ebZxerXC1ID3C/oK7OaaMGpMpPFRm4/XW/f9HL5VOEV6G1wbtnNmg+CorSfBbja7stbqt9NqefjEmukAuDhs42xgo9bbOQSR9tfvq+XnYwOaSIOjpom0j8ADrYd2+NiAkTTYDYUHCCLd44H6Qz91DjYgiTTYTrvdI2l01Dy6dphYW7MBE2l81ATsHI0HVvx1XVmygaQQRHqbItI43qzG9WvDwQZKGRVphjcb8M5JJr0gSQ/xgG7czNlAffkqBXeDknSVRNIjo8bBBjSRxjYOkaQfeEDXjwkbSEykr+0nafjQpucB3e4xYwN1XxhJU3hg3OqYsUEZJukII2l41HCS1vOAfnkM2UDZF0HSs+sUHjBqx4QNYJHu8kAQtjsmwAMcbMBEGh61afGANRtIMKwRSLoQpIm08doYsIGEw9p1SoSztimbjpoBGygEkd4gifRkeMCCDdI727Y7a+1CkDRqFt2w7fOYDRTYWaPaHTL+BTUftTFswA5tYkgadda6PGDVzggbpF8S7A541Gg8ULdqZpQNyjsR20macmiTOUZtlA20+MN2Zy20Do+a7LMU6TFswEiacmibOg8YsEGZJNJVmKS9kyNpEzYgkHRkYUGIs8Y7avdsIFFgDXfWqkRnzeDQZsgGyox0hTtrMEm3aTsn7q8DtXL49vnMFZ5Rp0SQNBcPPGaD1zNFQRm1T4ZFmoMHdP2sHO7N7MNnUNxZo5A0Omp1Lc/emymjZpSYjFoGR00rbdhU0CokOGuF2fUMPGqP4g9eKZAwI5fmrKF4IwM8oBdq9t1Bdo/mrGHdFAoTddasPqMYFUSEZNQyPGpDBgi/60Eg6WoIz6j7N2+QdvzxAYLy2x5s1AQ5a+DG0ZmHKu/yEDPqCSRtVqPm6eoAaBnSMmqZfPMGAIJhL4fP0NVEGifpzBNu3vB249c7bXxiTXDW2sHJJW1mPPBGb7TxiHUiIsBZ24RJWpO13cchQnrHMqoS6Kxha6P5BBLqUeN2R7sQFMIDK6MJD0O3D9aHNvszapwHNJIek7+Vd1KJiWfU6KHNImkbO2pMpKVxt3HM1IBG0hkbnTWLqxLmF1gStFHz2c0DXZF+ZpBcJ6ZL0hQe8BteMzKOrEjO2nrGhqRtpB3jS2DGYk3LqL0++3nA5IqeZJgkiMioKTxgfoHSkKyFOGugidv3osyut44Xa8rrDwJJE3jA4vKxNDYjxUm6SsioSc7aG/O7umPJWsSVfAoPsC+o1VXd0egqkRDhrFF4gOMVjzISLFIyappItyYn0sZiHdkWwQMyPmpMpK2fJEn6UJ7srG3ZzQNscd5KPI+RhtWAllFn7E7atG7Y4vA9Fdt+YkZte9L22FmzEOvEkzJqOP7gu3nzmKR5H789JD5iSFomoCfw1FIZPIIlvf4QwgPAy0RlINY0kgadNdk3TxDp1/zPlAcPyAnOGkzSFB5gi4M8uu5dnaC8/hBC0q34LvTmunfw6d5ZAzNqys7xTMZZs3h1nSCRtIhDG+8TWB1Zp2jO2pbtPMD/QHn48cv2RhtbG7ZzMl7bQ11IpB/Iev/LQihUCCHVFWlWmzJfdW9DMFmDqntog38pRy3vvJrFaiGZXFz0QrW4uLvrwSru4SLpkfWZccstt9xyyy233HLLLbfccssx9S/OTXvmn2y+VgAAAABJRU5ErkJggg==",Lc=["src"],Fc=I({__name:"image",props:{logoSrc:{},logoHeight:{default:35}},setup(t){const e=t;Ce(s=>({"2035992c":r(n)}));const a=S(()=>e.logoSrc?e.logoSrc:Bt),n=S(()=>`${e.logoHeight}px`);return(s,o)=>{const l=V("el-image");return m(),$(l,{src:r(a),class:"logo"},{error:P(()=>[b("img",{src:r(Bt),class:"logo"},null,8,Lc)]),_:1},8,["src"])}}});const ca=R(Fc,[["__scopeId","data-v-25a57a60"]]),Oc=I({__name:"title",props:{sideName:{default:"XhAdmin"}},setup(t){return(e,a)=>(m(),y("span",null,L(e.sideName),1))}}),qc={class:"xhadmin-logo-pro"},Hc={class:"logo-image"},zc={class:"logo-text"},Nc=I({__name:"index",props:{headerHeight:{},sideWidth:{},sideMenuWidth:{},logoHeight:{},logoSrc:{},sideName:{}},setup(t){const e=t;Ce(c=>({"17f791e0":r(s),c8e0b0ea:r(l),"516e1642":r(o)}));const a=fe(),{layoutInfo:n}=Me(a),s=S(()=>`${e.sideWidth}px`),o=S(()=>`${e.sideMenuWidth}px`),l=S(()=>`${e.headerHeight}px`);return(c,i)=>(m(),y("div",qc,[b("div",Hc,[k(ca,{"logo-src":c.logoSrc,"logo-height":c.logoHeight},null,8,["logo-src","logo-height"])]),Wt(b("div",zc,[k(Oc,{"side-name":c.sideName,"logo-height":c.logoHeight},null,8,["side-name","logo-height"])],512),[[Xt,!r(n).sideMenuCollapse]])]))}});const Wc=R(Nc,[["__scopeId","data-v-10c86653"]]),ra=I({__name:"index",setup(t){const e=ue(),a=()=>`${new Date().getTime()}${Math.random()}`,n=g("");return Gt(()=>e.fullPath,()=>{n.value=a()}),(s,o)=>{const l=V("router-view");return m(),$(l,{key:r(n)})}}}),Mt="2kxPLLhPzHvGV679nhjvx+7/Q6ejL3e/AUj0GGpKBzYMdXt7w3JImKWHUvOxWRwpxFrLh3DdPakGMtK5kIH+/G8LI/FGqrN3Ki2UpfG4d4dcs8WaQcZFAzQO9pYogwPcVaQDdXPcVbujAoEL7NAXDw4HgorRNyA3p+0+zVy/s/lADXLyXHNfsen/btV61qzfvD3EetLa/9wJHUvnL4+UHU6j/sZU7PxkxkVmbJxFcMBmZvJ0Ye7+ruLcfQPV7f8fbm7W/cMQGEFVxRsi73EyRrMT6zU9NnnuVW7MhC09yAZxFqLvsHCqu+qbh+V2y4X7zEdbUw2iDEfc+z/bSAPtsg==EmuytNQXOysbgaAl6gv2eTR/RPp3d3s+9M8/P6Up6GiCoNHNoYhhokC1L8m38Dp/tqElx+t1zbjQ05edoeC2FuYtR670VhtJ43+d6IW31l0VJiUlspqOxDNYEM6Svp9QR/68LOywfXSSrnO107+VifdaDA2pnc6+XLkIczMCAA5+ZPzGc8asiGUAPHXjGpOId7AE/x1owdIvWKKwcNitnAMbrw/Z8WHaL8VIxQo1Yd+AMqyH28iffk51OzwCO0X7WU1u6BWRcvshdOCVlT15J8//cqCskRcVxXZ70x7lj14biLzkrCpILzV7dcMzOYzT+/XtTIegCc9hCIPWoHuGxQ==kGlzZmVLYqKBkDfhdOclX966XBaO2tuC/1eFi7AsXwyb9x5qQYfF3WUR8h3tBcK3XcFtTu667R+vMD+N2CUye0hm0ZdxZmWC82qiieyVQfpqKyyTWfXjL0u1bBz0I10iKkmBfz2N4UP+oEzXA8PFldRrpJXWHayhbYpCN7xl30tNLdT19xqClThF5qHl1gOdMR/pZby5ZFYav+lDfzNO2RT2xVG5Xv06ScgsxLy4chNPJNL9FzlA4Pww+HvpdAm6FLFx2JqRUkonVGrrSn96ZHQdRqMQNUAi8M2JZC/0HWpnZXFPX6CY6y+9q+e3BuWjDMN+Mkf/RrYo2mlqWZHP3g==",Rt=`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDugQywjOCeu+GQ
b3/KAFUSrU7YXw23WBNo9c6aNsIu2JkEGWiXSWMlJ+QYVlGU+zTeiJbb3EK6r8/W
COarDDC92Qfbr3vztUG4vPbBYPewxaMrjCfbJ/9iut+Xjzd5Cci+FiD+Hcjne7wt
pYUmiOV2e0JpWX9OyI3QY+MkhddLaWHvzoJfxBf1vwDbBZbDME/byk4Zm5h7davE
rgFngEC1BoOqUn9T25thaYIa+oLq5jenkKVx0ztVe4sf/XxG18L7ZFuzYRR5kJ4o
VJfSwj3pwOWkvdLSyj72MtrR+9kvRfXpgB5Zcrp4UN7Gw4aU+cLcSwm6ZpsU4+8c
2oVCBpe9AgMBAAECggEAcueti2lz1kXCOGnfcRyT3/mrIMc6vngqccjrDpUPHK6x
ma38G9b5cy8yzx7XEyWrpQK9W5NUesi1IvMK3qFy4iQriwWSfCl5Tl2LrELhUkMF
h7dwhD9S5OgPTN9s5F14X0wd/Q+weQW99WfnLFeL5Xcg2cyKbxRkbl+RUUlCHkvr
ET0jBt6VhxvbDIncPWCmSqiZGLPw3ER6Ibl/HugIFh/bhC0dg4CIbL0tuZ4L8xXW
rbPBgOQuz5kNOkxvZrIbYfQxvAJ4TMKOV5ZW94AF4JJk+uAGOQJHvgyxLc/X/hY2
Yv7p+MTL0g0INvgdD3i2Ya9QKPL9bQ2RY3jVerK3qQKBgQD3TpDZlRcxqb+PhHlp
HA+wp1tDrs4qH0oD/y8/Mq700LUF0sLB8wViW6SMiCvCtDeLkns4FnxCU/qSQhzR
bA+2yOSeojPSWA8Ro1hY3j9HG6e7U3Pm42bijxEvUrApXquE+ozKjCoa4e8s64mv
iEStcT+qa1edUsCZkvhMLOUt/wKBgQD240UubTn5d23OguP/SBhe5fU6ofXghKJu
8wxuCuwwxxThKftNWqAxKerzBWg0hVjkYzl3HQ6er2uPfCnaIYThgBhp3J6Wq6Rj
TCz0M4S4bxp/psEl5gLi+cjMBa881CL9vgRD3UAGMdHwWjGNsUBtiC/Tq/t/KSIZ
IESUrHByQwKBgDYDuOts/tXgB3DnNEVa1ap1wx8zTOAyWU4qLD2XalMaSo9tCxCl
baWf8n6nNzedeQxJABSuBJHQGchcHEM5YO1BT32+W6cziIcHsEIouJVlWus1PPlO
7afKK6y0WLmQbdHrj1il6IRamIytHTNzhdyEAa3NKCO6cUqZqRWqMJwtAoGBALr1
vmT7CAUXYMsbKcce9H2gzMUa8xSTvGIiog4PLW9+wxwD669XaqnwYWCpfpEPThKd
5V2DXpfipaRh1Vu/OF5/330DOgFFd9ZOUFiZTu9QC5QRVoD5nsP9fgaqY1rAFsNq
itZNjPdj8OR/mLkBOpX3pKg5u9k+7/hxDB4+O2T7AoGAQCR0OOo7nGPTkqaId6xr
BpV/E09Z0jTrHd5j+su+nr6FM6aI2M83cxAehIJPlse3/Hua7TsQF91aXj7ZQaSq
cQGxYwuMp2MqT9v0s+YNQXBf3jUN6ThNpLTD5bKRTkYEaWcDVz/3zeM06I6OEdGj
MVh0HnBnhXGwbxu2+RDp83c=
-----END PRIVATE KEY-----`,Ut=window.location.hostname,nt=(t,e)=>{const a=new Na;a.setPrivateKey(e);const n=t.match(/.{1,344}/g);if(!n)throw new Error("令牌表单解密失败");let s="";if(n==null||n.forEach(o=>{const l=a.decrypt(o);l&&(s+=l)}),!s)throw new Error("解密失败");return JSON.parse(new TextDecoder().decode(Uint8Array.from(window.atob(s),o=>o.charCodeAt(0))))},Xc=()=>{const e=G().siteInfo;if(e!=null&&e.empower_token&&e.empower_private_key)try{const a=nt(e.empower_token,e.empower_private_key);return console.log("当前域名",Ut),a.systemUrl.includes(Ut)||a!=null&&a.isChannels?(console.log("使用自定义版权"),console.log("版权数据",a),a):(console.log("使用原生版权"),nt(Mt,Rt))}catch(a){console.error("服务端授权失败",a)}try{return nt(Mt,Rt)}catch(a){console.error("系统授权错误",a)}},ia=()=>{const e=G().siteInfo;return{version_name:(e==null?void 0:e.version_name)??"v1.0.0",version:(e==null?void 0:e.version)??1e3}},Qc={class:"copyright-set"},Zc={key:0},Gc=["href"],Jc=["href"],Yc=I({__name:"index",setup(t){const{systemAbout:e,systemAboutUrl:a,systemName:n,systemUrl:s}=Xc(),{version_name:o}=ia(),l=window.location.protocol;return(c,i)=>(m(),y("div",Qc,[q(" copyright © 2023 "),r(a)==="#"?(m(),y("span",Zc,L(r(e)),1)):(m(),y("a",{key:1,href:`${r(l)}//${r(a)}`,target:"_blank",class:"pl-10px"},L(r(e)),9,Gc)),q(" All Rights Reserved "),b("a",{href:`${r(l)}//${r(s)}`,target:"_blank",class:"pl-10px"},L(r(n))+" "+L(r(o)),9,Jc)]))}});const ua=R(Yc,[["__scopeId","data-v-448a4e9c"]]),Kc={class:"flex items-center"},er={class:"xhadmin-header-breadcrumb"},tr=I({__name:"side",setup(t){var o;const e=G(),a=fe(),{layoutInfo:n}=Me(a),s=((o=e.siteInfo.public_api)==null?void 0:o.header_left_file)??"";return(l,c)=>{const i=J;return m(),y("div",Kc,[b("div",er,[b("div",{class:"side-action",onClick:c[0]||(c[0]=u=>r(a).setLayoutMenuCollapse())},[k(i,{icon:r(n).sideMenuCollapse?"Expand":"Fold",color:"#555"},null,8,["icon"])])]),r(s)?(m(),$(r(ce),{key:0,file:r(s)},null,8,["file"])):B("",!0)])}}});const ar=R(tr,[["__scopeId","data-v-852079fd"]]),or={class:"xh-dropdown-link"},nr={class:"text"},sr=I({__name:"index",setup(t){const e=G(),a=fe(),{userInfo:n}=Me(a),s=()=>{var c,i;if(!((c=e.siteInfo.public_api)!=null&&c.user_edit_path)){ve("当前系统未开启个人资料修改功能","温馨提示");return}le((i=e.siteInfo.public_api)==null?void 0:i.user_edit_path)},o=()=>{a.loginOut()},l=c=>{switch(c){case"hanldProfile":s();break;case"loginout":o();break}};return(c,i)=>{const u=J,d=V("el-dropdown-item"),f=V("el-dropdown-menu"),v=V("el-dropdown");return m(),$(v,{class:"xh-dropdown",onCommand:l},{dropdown:P(()=>[k(f,null,{default:P(()=>[k(d,{command:"hanldProfile"},{default:P(()=>[q(" 个人中心 ")]),_:1}),k(d,{command:"loginout"},{default:P(()=>[q(" 退出登录 ")]),_:1})]),_:1})]),default:P(()=>{var _;return[b("div",or,[b("span",nr,L((_=r(n))==null?void 0:_.nickname),1),k(u,{icon:"ArrowUp",size:14})])]}),_:1})}}});const da=R(sr,[["__scopeId","data-v-a7b40429"]]),lr={class:"flex-1 flex items-center justify-end"},cr=I({__name:"tools",setup(t){var n;const a=((n=G().siteInfo.public_api)==null?void 0:n.header_right_file)??"";return(s,o)=>(m(),y("div",lr,[r(a)?(m(),$(r(ce),{key:0,file:r(a)},null,8,["file"])):B("",!0),k(da)]))}}),rr={class:"flex justify-between"},ir=I({__name:"index",setup(t){return(e,a)=>(m(),y("div",rr,[k(ar),k(cr)]))}});const ur={class:"xhadmin-mix-layout"},dr={class:"xhadmin-header-pro"},pr={class:"xhadmin-main-pro"},mr={class:"xhadmin-side-pro"},_r={class:"xhadmin-content-pro"},fr={class:"xhadmin-content pt-4 pl-4 pr-4"},hr={class:"xhadmin-copyright-pro"},vr=I({__name:"index",props:{active:{},menus:{},sideName:{},sideLogo:{},logoHeight:{},sideWidth:{},sideMenuWidth:{},headerHeight:{}},setup(t){const e=t;Ce(s=>({fc52b88e:r(a),"4b67b472":r(n)}));const a=S(()=>`${e.headerHeight}px`),n=S(()=>e.sideWidth);return(s,o)=>(m(),y("div",ur,[b("div",dr,[k(Wc,{"header-height":s.headerHeight,"side-width":s.sideWidth,"logo-src":s.sideLogo,"side-name":s.sideName,"logo-height":s.logoHeight,"side-menu-width":s.sideMenuWidth},null,8,["header-height","side-width","logo-src","side-name","logo-height","side-menu-width"]),k(ir,{class:"xhadmin-toolbar"})]),b("div",pr,[b("div",mr,[k(Uc,{"side-width":s.sideWidth,"side-menu-width":s.sideMenuWidth,active:s.active,menus:s.menus},null,8,["side-width","side-menu-width","active","menus"])]),b("div",_r,[b("div",fr,[k(ra)]),b("div",hr,[k(ua)])])])]))}});const gr=R(vr,[["__scopeId","data-v-46242c7f"]]),yr={};function xr(t,e){return m(),y("div",null," 侧边栏布局 ")}const kr=R(yr,[["render",xr]]),wr=I({__name:"menus",props:{active:{},menus:{}},setup(t){return(e,a)=>{const n=V("el-menu");return m(),$(n,{mode:"horizontal",class:"menus","default-active":e.active},{default:P(()=>[(m(!0),y(O,null,Q(e.menus,s=>(m(),$(Je,{key:s.id,"menu-data":s},null,8,["menu-data"]))),128))]),_:1},8,["default-active"])}}});const br={class:"xhadmin-top-layout"},Cr={class:"xhadmin-header-pro"},Pr={class:"xhadmin-header"},$r={class:"logo"},Ir={class:"menus"},Dr={key:0,class:"tools"},Ar={class:"user"},jr={class:"xhadmin-main-pro"},Sr={class:"xhadmin-main"},Tr={class:"xhadmin-content"},Vr={class:"xhadmin-copyright"},Er=I({__name:"index",props:{headerHeight:{},active:{},menus:{}},setup(t){Ce(o=>({"6794f285":r(s)}));const e=G().siteInfo,n=fe().layoutInfo.layoutSize,s=S(()=>n?"100%":"1200px");return(o,l)=>{var c,i,u;return m(),y("div",br,[b("div",Cr,[b("div",Pr,[b("div",$r,[k(ca,{"logo-src":((c=r(e))==null?void 0:c.web_logo)??""},null,8,["logo-src"])]),b("div",Ir,[k(wr,{active:o.active,menus:o.menus},null,8,["active","menus"])]),(i=r(e).public_api)!=null&&i.header_right_file?(m(),y("div",Dr,[k(r(ce),{file:(u=r(e).public_api)==null?void 0:u.header_right_file},null,8,["file"])])):B("",!0),b("div",Ar,[k(da)])])]),b("div",jr,[b("div",Sr,[b("div",Tr,[k(ra)]),b("div",Vr,[k(ua)])])])])}}});const Br=R(Er,[["__scopeId","data-v-e4f32260"]]),Mr={};function Rr(t,e){return m(),y("div",null," 用户中心布局 ")}const Ur=R(Mr,[["render",Rr]]),Lr=()=>{const t=ue(),e=it({active:""}),a=n=>{let s=Et.get(n);s||(s=Et.get(Yt)),e.active=s??""};return Gt(()=>t.fullPath,()=>{var s,o;let n="";(s=t.query)!=null&&s.group&&t.meta.ajaxParams.includes("group")?n=`${t.path}_group=${(o=t.query)==null?void 0:o.group}`:t.meta.ajaxParams&&!n?n=`${t.path}_${t.meta.ajaxParams}`:n=t.path,a(n)}),{...Xa(e),updateActive:a}},[Fr,Or]=Wa(Lr),qr=()=>Or()??{active:g(""),updateActive:()=>{}},Hr=I({__name:"index",setup(t){const e=G(),a=fe(),{active:n}=qr(),{layoutInfo:s}=Me(a),o=e.siteInfo,l=a.menuList;return(c,i)=>{var u,d;return m(),y(O,null,[r(s).layout==="mix"?(m(),$(r(gr),{key:0,"header-height":r(s).headerHeight,"side-width":r(s).sideWidth,"side-menu-width":r(s).sideMenuWidth,"side-logo":(u=r(o))==null?void 0:u.web_logo,"side-name":(d=r(o))==null?void 0:d.web_name,"logo-height":r(s).logoHeight,active:r(n),menus:r(l)},null,8,["header-height","side-width","side-menu-width","side-logo","side-name","logo-height","active","menus"])):B("",!0),r(s).layout==="side"?(m(),$(r(kr),{key:1})):B("",!0),r(s).layout==="top"?(m(),$(r(Br),{key:2,"header-height":r(s).headerHeight,active:r(n),menus:r(l)},null,8,["header-height","active","menus"])):B("",!0),r(s).layout==="user"?(m(),$(r(Ur),{key:3})):B("",!0)],64)}}}),zr={path:"/",name:"default-router",component:Hr,redirect:Yt,children:[]},Nr=[{path:"/workspace/exception",name:"workspaceException",component:()=>ye(()=>import("./index.7f0b75d2.js"),["assets/js/index.7f0b75d2.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"]),meta:{title:"出现错误啦~"}}],Wr=[{...zr,children:[...Nr]},{path:"/login",name:"Login",component:()=>ye(()=>import("./index.ccd04297.js"),["assets/js/index.ccd04297.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css","assets/css/index.2e77e8b7.css"]),meta:{title:"用户登录"}},{path:"/redirect/:path(.*)",name:"redirect",component:()=>ye(()=>import("./index.0e4a41c5.js"),["assets/js/index.0e4a41c5.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"])},{path:"/exception",name:"exception",meta:{title:"抱歉，你访问的页面不存在~"},component:()=>ye(()=>import("./index.7f0b75d2.js"),["assets/js/index.7f0b75d2.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"])},{path:"/:pathMatch(.*)",component:()=>ye(()=>import("./index.7f0b75d2.js"),["assets/js/index.7f0b75d2.js","assets/js/.pnpm.55d2c8ea.js","assets/css/.pnpm.1d3e7f35.css"])}],Xr=Qa({routes:[...Wr],history:Za("/")}),X=Xr,Ie=()=>location.pathname.replace(/^\/+|\/+$/g,""),ge=(t="",e=!1)=>{const a=X.currentRoute.value,n=Ie(),s=g(a.path);if(e){const o=s.value.indexOf("/",1);s.value=s.value.substring(0,o),s.value=`${s.value}/`}return`${n}${s.value}${t}`},wt=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},le=(t,e)=>{wt(t)?location.href=t:X.push({path:t,query:e})};function st(t=6){let e="";for(let a=0;a<t;a++)e+=Math.floor(Math.random()*10);return e}const Xe=(t,e)=>{for(const a in e)if(e[a]===t)return!0;return!1},Qe=()=>{var e;(e=X.currentRoute.value.query)!=null&&e.isBack||D("返回上次页面错误"),X.back()},Qr=t=>t.replace(/\/(\w)/g,(e,a)=>a.toUpperCase()),Zr=(t,e="Enter")=>{const a=n=>{n.key===e&&(t(),n.preventDefault())};Ga(()=>document.addEventListener("keydown",a)),Nt(()=>document.removeEventListener("keydown",a))},et=t=>{let e;const a={},n=t.slice(t.indexOf("?")+1).split("&");for(let s=0;s<n.length;s++)e=n[s].split("="),a[e[0]]=e[1];return a},Gr=()=>window.location.origin,G=Zt("app",()=>{const e=`/${Ie()}/Index/site`,a=$e(),n=g({...ko}),s=g(),o=i=>{n.value=i};return{useAppId:a,siteInfo:n,getSite:async()=>{const{data:i}=await he(e);return o(i),i},setSiteInfo:o,setLoginLink:i=>{s.value=i}}}),Jr=async t=>{var n;const e=G().siteInfo,a=((n=e==null?void 0:e.uploadify_api)==null?void 0:n.index)||"";return await he(a,t).then(s=>s==null?void 0:s.data)},Yr=async t=>{var s;const e=G().siteInfo,a=(s=e==null?void 0:e.uploadify_api)==null?void 0:s.edit;if(!a)return D("请先配置附件修改接口"),!1;const n=g();return await _e(xo,{modelValue:t,"onUpdate:init":o=>{n.value=o}},{title:"修改附件",customStyle:{width:"450px",height:"500px"},beforeClose:(o,l,c)=>{var i;o==="confirm"?(i=n.value)!=null&&i.getFormData()&&c():c()}}).then(()=>{var l;const o=(l=n.value)==null?void 0:l.getFormData();if(o)return xe(`${a}?id=${t==null?void 0:t.id}`,o).then(c=>{Y((c==null?void 0:c.msg)||"修改成功")})})},Kr=async(t,e)=>{var c;const a=G().siteInfo,n=(c=a==null?void 0:a.uploadify_api)==null?void 0:c.move;if(!n)return D("请先配置文件移动接口"),Promise.reject(new Error("请先配置文件移动接口"));const s=(t==null?void 0:t.id)??"",o=e.map(i=>i.id);return s?o.length<=0?(Ee("请选择需要移动的文件","error"),Promise.reject(new Error("请选择需要移动的文件"))):await xe(n,{cid:s,ids:o}).then(i=>{Y((i==null?void 0:i.msg)||"移动成功")}):(Ee("请选择需要移动到的分类","error"),Promise.reject(new Error("请选择需要移动到的分类")))},ei=async t=>{var s;const e=G().siteInfo,a=(s=e==null?void 0:e.uploadify_api)==null?void 0:s.del;if(!a)return D("请先配置文件删除接口"),Promise.reject(new Error("请先配置文件删除接口"));if(t.length<=0)return D("请选择需要删除的文件"),Promise.reject(new Error("请选择需要删除的文件"));const n={ids:t.map(o=>o.id)};return await ve("是否确认删除选中的文件？","温馨提示","error").then(()=>We(a,n).then(o=>{Y((o==null?void 0:o.msg)||"删除成功")}))},bt=t=>(we("data-v-f91b0178"),t=t(),be(),t),ti={class:"category-container"},ai={class:"item"},oi=bt(()=>b("div",{class:"title"}," 分类名称 ",-1)),ni={class:"item"},si=bt(()=>b("div",{class:"title"}," 分类目录 ",-1)),li={class:"item"},ci=bt(()=>b("div",{class:"title"}," 分类排序 ",-1)),ri=I({__name:"category",props:{modelValue:{}},emits:["update:init"],setup(t,{expose:e,emit:a}){const n=t,s=ke(),o=g({sort:0,...n.modelValue}),l=()=>o.value.title?o.value.dir_name?o.value.sort===""?(D("请输入分类排序"),!1):o.value:(D("请输入分类目录"),!1):(D("请输入分类名称"),!1);return ie(()=>{a("update:init",s.exposed)}),e({getFormData:l}),(c,i)=>{const u=V("el-input");return m(),y("div",ti,[b("div",ai,[oi,k(u,{modelValue:r(o).title,"onUpdate:modelValue":i[0]||(i[0]=d=>r(o).title=d),placeholder:"请输入分类名称"},null,8,["modelValue"])]),b("div",ni,[si,k(u,{modelValue:r(o).dir_name,"onUpdate:modelValue":i[1]||(i[1]=d=>r(o).dir_name=d),placeholder:"请输入分类目录"},null,8,["modelValue"])]),b("div",li,[ci,k(u,{modelValue:r(o).sort,"onUpdate:modelValue":i[2]||(i[2]=d=>r(o).sort=d),placeholder:"请输入分类排序"},null,8,["modelValue"])])])}}});const pa=R(ri,[["__scopeId","data-v-f91b0178"]]),ii=async()=>{var e;const t=G().siteInfo;return await he(((e=t==null?void 0:t.uploadify_cate)==null?void 0:e.index)||"").then(a=>(a==null?void 0:a.data)||[])},ui=async()=>{var n;const t=G().siteInfo,e=(n=t==null?void 0:t.uploadify_cate)==null?void 0:n.add;if(!e)return D("请先配置分类添加接口"),!1;const a=g();return await _e(pa,{"onUpdate:init":s=>{a.value=s}},{title:"添加分类",customStyle:{width:"350px",height:"400px"},beforeClose:(s,o,l)=>{var c;s==="confirm"?(c=a.value)!=null&&c.getFormData()&&l():l()}}).then(()=>{var o;const s=(o=a.value)==null?void 0:o.getFormData();if(s)return xe(e,s).then(l=>{Y((l==null?void 0:l.msg)||"添加成功")})})},di=async t=>{var s;const e=G().siteInfo,a=(s=e==null?void 0:e.uploadify_cate)==null?void 0:s.edit;if(!a)return D("请先配置分类修改接口"),!1;const n=g();return await _e(pa,{modelValue:t,"onUpdate:init":o=>{n.value=o}},{title:"修改分类",customStyle:{width:"350px",height:"400px"},beforeClose:(o,l,c)=>{var i;o==="confirm"?(i=n.value)!=null&&i.getFormData()&&c():c()}}).then(()=>{var l;const o=(l=n.value)==null?void 0:l.getFormData();if(o)return Ne(`${a}?id=${t==null?void 0:t.id}`,o).then(c=>{Y((c==null?void 0:c.msg)||"修改成功")})})},pi=async t=>{var n;const e=G().siteInfo,a=(n=e==null?void 0:e.uploadify_cate)==null?void 0:n.del;if(!a){D("请先配置分类删除接口");return}return await ve("是否确认删除该分类？","温馨提示","error").then(()=>{const s={id:t==null?void 0:t.id};return We(a,s).then(o=>{Y((o==null?void 0:o.msg)||"删除成功")})})};const mi={class:"uploadify-modal"},_i={class:"category-container"},fi={class:"category-title"},hi={class:"title"},vi=b("span",null,"附件分类",-1),gi={class:"category-content"},yi={class:"title"},xi=b("span",null,"全部数据",-1),ki=["onClick"],wi={class:"title"},bi={key:0,class:"action"},Ci={class:"content-container"},Pi={class:"action-box"},$i={class:"action"},Ii={key:0,class:"content-box"},Di=["title","onClick","onDblclick"],Ai=["src","alt","title"],ji={key:1,class:"preview"},Si={key:1,class:"empty-box"},Ti={key:2,class:"paginate-box"},ma=I({__name:"modal",props:{limit:{default:1},suffix:{default:"*"},dir_name:{}},emits:["update:init"],setup(t,{expose:e,emit:a}){var Ct;const n=t,s=g(!1),o=g([]),l=g([]),c=G().siteInfo,i=Re(),u=$e(),d=g({active:"",dir_name:"",list:[]}),f=(Ct=c.uploadify_api)==null?void 0:Ct.upload,v=g({[mt]:i.value||"",ACCEPT:"application/json"});u.value&&(v.value={...v.value,[_t]:u.value});const _=g({action:`${ft}${f}`,data:{cid:d.value.active||"",dir_name:d.value.dir_name||""},headers:v.value,multiple:!0,withCredentials:!0,showFileList:!1}),p=g({background:!0,layout:"prev, pager, next, jumper",total:0}),h=g({page:1,limit:20}),x=ke(),C=g([]),j=()=>{h.value.page=1,h.value.limit=20,d.value.active="",C.value=[],o.value=[],l.value=[]},E=async()=>await ii().then(U=>{var ae;const ne=((ae=U.find(ee=>(ee==null?void 0:ee.dir_name)===n.dir_name))==null?void 0:ae.id)||"";d.value.active=ne,d.value.list=U}),M=async()=>{var ae;let U=n.suffix;typeof n.suffix=="object"&&(U=n.suffix.join(","));const ne={cid:((ae=d.value)==null?void 0:ae.active)||"",page:h.value.page,limit:h.value.limit,suffix:U};return await Jr(ne).then(ee=>{C.value=(ee==null?void 0:ee.data)||[],p.value.total=(ee==null?void 0:ee.total)||0})},w=U=>{j(),d.value.active=(U==null?void 0:U.id)??"",d.value.dir_name=(U==null?void 0:U.dir_name)??"",h.value.page=1,M()},A=U=>{s.value?l.value.includes(U)?l.value.splice(l.value.indexOf(U),1):l.value.push(U):n.limit===1?o.value[0]=U:o.value.includes(U)?o.value.splice(o.value.indexOf(U),1):(n.limit===0||o.value.length<n.limit)&&o.value.push(U)},T=()=>o.value,z=()=>{s.value=!1,l.value=[]},K=()=>{l.value.length===C.value.length?l.value=[]:l.value=[...C.value]},oe=U=>{Kr(U,l.value).then(()=>{j(),M(),l.value=[],s.value=!1})},Ae=U=>{Yr(U).then(()=>{M()})},Le=()=>{ei(l.value).then(U=>{j(),M(),l.value=[],s.value=!1})},Fe=U=>{h.value.page=U,M()},Oe=U=>{(U==null?void 0:U.code)!==200?D((U==null?void 0:U.msg)||"上传失败"):(j(),M(),Y((U==null?void 0:U.msg)||"上传成功"))},tt=U=>{console.error(U),D("上传失败")},_a=()=>{E().then(()=>{M(),a("update:init",x.exposed)})};return e({getSelected:T}),ie(()=>_a()),(U,ne)=>{const ae=J,ee=V("el-button"),fa=V("el-dropdown-item"),ha=V("el-dropdown-menu"),va=V("el-dropdown"),ga=V("el-upload"),ya=V("el-text"),xa=V("el-empty"),ka=V("el-pagination");return m(),y("div",mi,[b("div",_i,[b("div",fi,[b("div",hi,[k(ae,{icon:"Folder",size:18}),vi]),b("div",{class:"created",onClick:ne[0]||(ne[0]=N=>r(ui)().then(()=>E()))},[k(ae,{icon:"FolderAdd",color:"#409eff"})])]),b("div",gi,[b("div",{class:pe([{active:r(d).active===""},"item"]),onClick:ne[1]||(ne[1]=N=>w())},[b("div",yi,[k(ae,{icon:"Folder",size:17}),xi])],2),(m(!0),y(O,null,Q(r(d).list,(N,Ve)=>(m(),y("div",{key:Ve,class:pe([{active:N.id===r(d).active},"item"]),onClick:qe=>w(N)},[b("div",wi,[k(ae,{icon:"Folder",size:17}),b("span",null,L(N.title),1)]),N.is_system==="10"?(m(),y("div",bi,[k(ae,{icon:"Edit",onClick:qe=>r(di)(N).then(()=>E())},null,8,["onClick"]),k(ae,{icon:"Delete",onClick:qe=>r(pi)(N).then(()=>E())},null,8,["onClick"])])):B("",!0)],10,ki))),128))])]),b("div",Ci,[b("div",Pi,[b("div",$i,[r(s)?B("",!0):(m(),$(ee,{key:0,type:"primary",onClick:ne[2]||(ne[2]=N=>s.value=!0)},{default:P(()=>[q(" 管理 ")]),_:1})),r(s)?(m(),$(ee,{key:1,type:"primary",onClick:z},{default:P(()=>[q(" 退出 ")]),_:1})):B("",!0),r(s)?(m(),$(ee,{key:2,type:"info",onClick:K},{default:P(()=>[q(" 全选 ")]),_:1})):B("",!0),r(s)?(m(),$(ee,{key:3,type:"danger",onClick:Le},{default:P(()=>[q(" 删除 ")]),_:1})):B("",!0),r(s)?(m(),$(va,{key:4,class:"dropdown",onCommand:ne[3]||(ne[3]=N=>oe(N))},{dropdown:P(()=>[k(ha,null,{default:P(()=>[(m(!0),y(O,null,Q(r(d).list,(N,Ve)=>(m(),$(fa,{key:Ve,command:N},{default:P(()=>[q(L(N.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:P(()=>[k(ee,{type:"warning"},{default:P(()=>[q(" 移动 ")]),_:1})]),_:1})):B("",!0)]),k(ga,F({class:"upload"},r(_),{"on-success":Oe,"on-error":tt}),{default:P(()=>[k(ee,{type:"success"},{default:P(()=>[q(" 上传 ")]),_:1})]),_:1},16)]),r(C).length?(m(),y("div",Ii,[(m(!0),y(O,null,Q(r(C),(N,Ve)=>(m(),y("div",{key:Ve,class:pe(["item",{active:!r(s)&&r(o).includes(N),"active-warning":r(s)&&r(l).includes(N)}]),title:N.title,onClick:qe=>A(N),onDblclick:qe=>Ae(N)},[r(ea)(N.url)?(m(),y("img",{key:0,src:N.url,alt:N.title,title:N.title,class:"preview"},null,8,Ai)):(m(),y("div",ji,[k(ae,{icon:"Document",size:42})])),k(ya,{class:"title",truncated:""},{default:P(()=>[q(L(N.title),1)]),_:2},1024)],42,Di))),128))])):(m(),y("div",Si,[k(xa,{description:"当前没有更多附件"})])),r(C).length?(m(),y("div",Ti,[k(ka,F(r(p),{onCurrentChange:Fe}),null,16)])):B("",!0)])])}}});class Vi{constructor(){He(this,"title","");He(this,"iconSvg","");He(this,"tag","");this.title="附件库",this.iconSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 75"><defs><style>.cls-1{fill:#1677ff;fill-rule:evenodd;}</style></defs><title>xhadmin</title><g id="图层_2" data-name="图层 2"><g id="svg26"><g id="g24"><path id="path14" class="cls-1" d="M30.8,32.9q22.35-17.38,42.46-4c10,6.64,14.29,8.63,17.26,6.64,6-4,.66-12-10.62-15.92Q54,10.47,30.8,32.9Z"/><path id="path16" class="cls-1" d="M24.16,38.2q7.45-23.75,30.65-24.64C66.29,13.11,70.73,12.23,72,9c2.4-6.46-6.22-9.66-17.24-6.42Q29.43,10.07,24.16,38.2Z"/><path id="path18" class="cls-1" d="M20,51.8q-3-23,11.75-36.39c7.31-6.64,9.75-9.7,8.77-12.47-2-5.57-9.45-2.91-14.89,5.31Q13.2,27.12,20,51.8Z"/><path id="path20" class="cls-1" d="M26.41,65Q13.5,49,14.19,32.24c.35-8.28,0-11.66-2-13.09-4-2.86-5.7,4.85-5.68,11.37Q6.6,51.93,26.41,65Z"/><path id="path22" class="cls-1" d="M35.44,69.4c1.5-.67-17.24.66-25.8-14.8-3.39-6.12-5.18-8.39-7.3-8.36-4.22.06-2,6.45.92,11.14C12.88,72.71,34,70.05,35.44,69.4Z"/></g><text data-v-4db12289="" class="logo-svg-cls-2 logo-svg-text theme--transparent" transform="translate(28.28 57.81)">xhadmin</text></g></g></svg>',this.tag="button"}getValue(e){return""}isActive(e){return!1}isDisabled(e){return!1}exec(e,a){const n=g();_e(ma,{"onUpdate:init":s=>{n.value=s}},{title:"附件库",center:!0,customStyle:{width:"60%",height:"85vh"},beforeClose:(s,o,l)=>{var c;if(s==="confirm"){const i=(c=n.value)==null?void 0:c.getSelected();i.length?(i.map(d=>d==null?void 0:d.url).forEach(d=>{const f=d.lastIndexOf("."),v=d.substr(f+1);let _="";["gif","jpg","jpeg","png"].includes(v.toLowerCase())?_=`<img src="${d}" />`:["mp4"].includes(v.toLowerCase())?_=`<video src="${d}" controls="controls" />`:["mp3","ogg","wav"].includes(v.toLowerCase())?_=`<audio src="${d}" controls="controls" />`:_=`<a href="${d}">${d}</a>`,e.setHtml(_)}),l()):D("请选择文件")}else l()}})}}const Ei=I({__name:"index",setup(t){const e=g("zh-cn"),a=S(()=>e.value==="zh-cn"?Ja:Ya),n=it({autoInsertSpace:!1}),s=it({max:1});return(o,l)=>{const c=V("router-view"),i=V("el-config-provider");return m(),$(i,{button:r(n),message:r(s),locale:r(a)},{default:P(()=>[k(c)]),_:1},8,["button","message","locale"])}}}),Bi=I({__name:"App",setup(t){const e={key:"xhUploadify",factory(){return new Vi}};return Ka.registerMenu(e),Fr(),(a,n)=>(m(),$(Ei))}}),Mi=t=>{let e="",a=0;t=(t||0).toString();for(let n=t.length-1;n>=0;n--)a++,e=t.charAt(n)+e,!(a%3)&&n!==0&&(e=`,${e}`);return e},Lt=(t,e,a,n)=>{let s;const o=a-e;function l(c){s||(s=c);const i=c-s,u=Math.min(i/n,1),d=e+Math.floor(u*o);d>999&&t.dataset.numberScrollThousandsOff===void 0?t.innerHTML=Mi(d):t.innerHTML=d.toString(),i<n&&globalThis.requestAnimationFrame(l)}globalThis.requestAnimationFrame(l)},Ri={mounted(t,e,a){const{value:n}=e,s=parseFloat(t.dataset.numberScrollValue??"0"),o=n?parseFloat(n.toString()):0,l=parseInt(t.dataset.numberScrollDuration??"1000");Lt(t,s,o,l),t.dataset.numberScrollValue=o.toString()},updated(t,e){if(t.dataset.numberScrollOnceExecuted)return;console.log("updated");const{value:a}=e,n=parseFloat(t.dataset.numberScrollValue??"0"),s=a?parseFloat(a.toString()):0,o=parseInt(t.dataset.numberScrollDuration??"1000");s!==n&&(Lt(t,n??0,a,o),e.modifiers.once&&(t.dataset.numberScrollOnceExecuted="true")),t.dataset.numberScrollValue=s.toString()}};function Ui(t){t.directive("number-scroll",Ri)}const Se=g(ze),dt=g([...Co]),lt=g([...dt.value,Se.value]),Ft=g(!1);X.beforeEach(async(t,e,a)=>{var u,d,f,v,_;if(Jt.start(),dt.value.includes(t.path)){a();return}const n=fe(),s=$e(),o=Re(),l=S(()=>n.userInfo);if((u=t.query)!=null&&u.token){let p=(d=t.query)==null?void 0:d.token;p=p.includes("Bearer")?p:`Bearer ${p}`,o.value=p}if((f=t.query)!=null&&f.appid&&(s.value=(v=t.query)==null?void 0:v.appid),o.value&&[Se.value].includes(t.path)){a({path:"/"});return}const c=G(),i=S(()=>c.siteInfo);if(!i.value.web_name){if(await c.getSite(),!i.value.web_name){D("站点名称web_name字段缺失");return}if(i.value.login_link&&c.setLoginLink(i.value.login_link),(_=i.value)!=null&&_.remote_url&&!Ft.value){const p=i.value.remote_url;Se.value&&(lt.value=[...lt.value,Se.value]),Ac(p),Ft.value=!0,a({...t,replace:!0});return}}if(o.value){if(!l.value.username&&!dt.value.includes(t.path))try{if(await n.getUserInfo(),!l.value.username){D("用户信息缺少username字段");return}const p=n.routeList;if(p.length===0){n.Authorization="",D("您没有任何权限，请联系管理员！"),a({path:Se.value});return}p.forEach(h=>{X.addRoute("default-router",h)}),a({...t,replace:!0});return}catch(p){console.error("前置路由错误",p)}}else if(!lt.value.includes(t.path)){a({path:Se.value,query:{redirect:t.path}});return}a()});X.afterEach(t=>{var c,i,u;const{version_name:e}=ia(),n=((c=G().siteInfo)==null?void 0:c.web_name)||"XHAdmin",s=`${n} ${e}`;let o=(i=t.meta)==null?void 0:i.title;const l=(u=t.query)==null?void 0:u.code;l&&(o=Po[l]||"抱歉，你访问的页面不存在"),o?document.title=`${o} - ${s}`:n&&(document.title=s),Jt.done()});const Li=t=>{t.use(je),t.config.globalProperties.$XModal=je.modal,t.config.globalProperties.$XPrint=je.print,t.config.globalProperties.$XSaveFile=je.saveFile,t.config.globalProperties.$XReadFile=je.readFile},Fi=eo(),De=to(Bi);Li(De);De.use(Fi);De.use(X);De.use(ao);De.use(Ui);De.mount("#app");oa.vue=De;export{J as _,G as a,Zr as b,ua as c,R as d,ce as e,Re as f,Po as g,yt as h,ra as i,ze as l,le as o,fe as u};
